import{u as b,e as a,a as e,j as u,f as v,v as m,g as o,t as n,k as y,F as _,i as f,l as k,o as i}from"./app-wqEFckxb.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const S={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},V={key:0,class:"text-red-500 text-sm mt-1"},U=["value"],E={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},P={key:0,class:"text-red-500 text-sm mt-1"},A={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},F={class:"text-gray-300 text-sm"},j=["onUpdate:modelValue"],w=["value"],D={class:"flex justify-end"},M={type:"submit",class:"btn-primary"},C={__name:"Form",props:{track:{type:Object,default:()=>({})},releases:{type:Array,default:()=>[]},artists:{type:Array,default:()=>[]},mode:{type:String,default:"create"}},setup(c){const r=c,s=b({release_id:r.track.release_id||"",title:r.track.title||"",track_number:r.track.track_number||"",duration:r.track.duration||"",preview_url:r.track.preview_url||"",spotify_url:r.track.spotify_url||"",youtube_url:r.track.youtube_url||"",apple_music_url:r.track.apple_music_url||"",deezer_url:r.track.deezer_url||"",amazon_music_url:r.track.amazon_music_url||"",soundcloud_url:r.track.soundcloud_url||"",tidal_url:r.track.tidal_url||"",artist_ids:r.track.artists?r.track.artists.map(d=>d.id):[],cover_file:null}),x=()=>{console.log("ðŸŽµ Enviando formulario..."),console.log("ðŸ“¦ Datos del form:",s.data());const d=r.mode==="edit"?route("admin.tracks.update",r.track.id):route("admin.tracks.store"),t=(r.mode==="edit","post");s.transform(l=>({...l,_method:r.mode==="edit"?"put":"post"})).submit(t,d,{forceFormData:!0,onStart:()=>console.log("ðŸš€ Request iniciada:",d),onProgress:l=>console.log("ðŸ“¤ Progreso:",l),onError:l=>{console.group("âŒ Errores de validaciÃ³n"),Object.entries(l).forEach(([p,g])=>console.log(`- ${p}:`,g)),console.groupEnd()},onSuccess:()=>console.log("âœ… Pista guardada correctamente"),onFinish:()=>console.log("ðŸ Proceso finalizado")})};return(d,t)=>(i(),a("form",{onSubmit:k(x,["prevent"]),class:"space-y-6"},[e("div",S,[e("div",null,[t[7]||(t[7]=e("label",{class:"text-gray-300 text-sm"},"TÃ­tulo de la pista",-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o(s).title=l),type:"text",class:"input",placeholder:"Ej: Mi canciÃ³n"},null,512),[[m,o(s).title]]),o(s).errors.title?(i(),a("p",V,n(o(s).errors.title),1)):v("",!0)]),e("div",null,[t[8]||(t[8]=e("label",{class:"text-gray-300 text-sm"},"NÃºmero de pista",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>o(s).track_number=l),type:"number",min:"1",class:"input"},null,512),[[m,o(s).track_number]])])]),e("div",null,[t[10]||(t[10]=e("label",{class:"text-gray-300 text-sm"},"Lanzamiento asociado",-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>o(s).release_id=l),class:"input"},[t[9]||(t[9]=e("option",{disabled:"",value:""},"Selecciona un release",-1)),(i(!0),a(_,null,f(c.releases,l=>(i(),a("option",{key:l.id,value:l.id},n(l.title),9,U))),128))],512),[[y,o(s).release_id]])]),e("div",E,[e("div",null,[t[11]||(t[11]=e("label",{class:"text-gray-300 text-sm"},"DuraciÃ³n (mm:ss)",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>o(s).duration=l),type:"text",class:"input",placeholder:"Ej: 03:25"},null,512),[[m,o(s).duration]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"text-gray-300 text-sm"},"PrevisualizaciÃ³n (URL)",-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o(s).preview_url=l),type:"url",class:"input",placeholder:"https://..."},null,512),[[m,o(s).preview_url]])])]),e("div",null,[t[13]||(t[13]=e("label",{class:"text-gray-300 text-sm"},"Portada de la pista",-1)),e("input",{type:"file",class:"input-file",onChange:t[5]||(t[5]=l=>{o(s).cover_file=l.target.files[0],console.log("ðŸ–¼ Archivo seleccionado:",l.target.files[0])})},null,32),o(s).errors.cover_file?(i(),a("p",P,n(o(s).errors.cover_file),1)):v("",!0)]),e("div",null,[t[14]||(t[14]=e("h3",{class:"text-[#ffa236] font-semibold mb-2"},"Plataformas",-1)),e("div",A,[(i(),a(_,null,f({spotify_url:"Spotify",youtube_url:"YouTube",apple_music_url:"Apple Music",deezer_url:"Deezer",amazon_music_url:"Amazon Music",soundcloud_url:"SoundCloud",tidal_url:"Tidal"},(l,p)=>e("div",{key:p},[e("label",F,n(l),1),u(e("input",{"onUpdate:modelValue":g=>o(s)[p]=g,type:"url",class:"input",placeholder:"https://..."},null,8,j),[[m,o(s)[p]]])])),64))])]),e("div",null,[t[15]||(t[15]=e("label",{class:"text-gray-300 text-sm"},"Artistas participantes",-1)),u(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>o(s).artist_ids=l),class:"input",multiple:""},[(i(!0),a(_,null,f(c.artists,l=>(i(),a("option",{key:l.id,value:l.id},n(l.name),9,w))),128))],512),[[y,o(s).artist_ids]]),t[16]||(t[16]=e("p",{class:"text-gray-500 text-xs mt-2"},"Puedes seleccionar varios artistas (Ctrl/Cmd + click).",-1))]),e("div",D,[e("button",M,n(r.mode==="edit"?"Actualizar pista":"Guardar pista"),1)])],32))}},N=z(C,[["__scopeId","data-v-0f2f6b17"]]);export{N as default};
