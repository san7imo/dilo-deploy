import{u as U,x as w,c as N,w as f,a as t,b as S,t as i,g as o,m as A,h as P,l as j,e as n,f as c,o as r,F as v,i as y,j as p,k as g,v as x}from"./app-DAUalued.js";import{A as F}from"./AdminLayout-DhfR_T_4.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./responsive-blanco-DOkwJ8BK.js";const D={class:"flex items-center justify-between mb-6"},M={class:"text-2xl font-semibold text-white"},E={class:"text-gray-400 text-sm"},L={class:"max-w-xl"},T={key:0,class:"text-red-500 text-sm mt-1"},$={class:"bg-[#0f0f0f] border border-[#2a2a2a] rounded-lg p-4"},R={class:"text-sm text-gray-400 mb-4"},G=["onUpdate:modelValue"],I=["onUpdate:modelValue"],O=["onUpdate:modelValue"],q=["value"],z=["onUpdate:modelValue"],H=["onUpdate:modelValue"],J={class:"flex items-end"},K=["onClick","disabled"],Q={key:0,class:"text-red-500 text-xs col-span-full"},W={key:0,class:"text-red-500 text-sm"},X={__name:"Create",props:{track:Object,artists:Array},setup(d){const _=d,a=U({split_type:"master",contract:null,participants:[{role:"label",percentage:0,artist_id:"",name:"Dilo Records",payee_email:""}]}),k=w(()=>a.participants.reduce((u,e)=>u+Number(e.percentage||0),0)),V=()=>{a.participants.push({role:"artist",percentage:0,artist_id:"",name:"",payee_email:""})},h=u=>{a.participants.splice(u,1)},C=()=>{a.post(route("admin.tracks.splits.store",_.track.id),{forceFormData:!0})};return(u,e)=>(r(),N(F,{title:"Create Split"},{default:f(()=>{var b;return[t("div",D,[t("div",null,[t("h1",M,"Create Split Â· "+i(d.track.title),1),t("p",E,i(((b=d.track.release)==null?void 0:b.title)||"-"),1)]),S(o(A),{href:u.route("admin.tracks.splits.index",d.track.id),class:"text-gray-400 hover:text-white"},{default:f(()=>[...e[1]||(e[1]=[P(" Volver ",-1)])]),_:1},8,["href"])]),t("form",{onSubmit:j(C,["prevent"]),class:"space-y-6"},[t("div",L,[e[2]||(e[2]=t("label",{class:"text-gray-300 text-sm"},"Contrato",-1)),t("input",{type:"file",class:"input-file",onChange:e[0]||(e[0]=l=>{o(a).contract=l.target.files[0]})},null,32),o(a).errors.contract?(r(),n("p",T,i(o(a).errors.contract),1)):c("",!0)]),t("div",$,[t("div",{class:"flex items-center justify-between mb-4"},[e[3]||(e[3]=t("h3",{class:"text-[#ffa236] font-semibold"},"Participantes",-1)),t("button",{type:"button",class:"btn-secondary",onClick:V}," + Agregar ")]),t("div",R," Total: "+i(k.value.toFixed(2))+"% ",1),(r(!0),n(v,null,y(o(a).participants,(l,m)=>(r(),n("div",{key:m,class:"grid grid-cols-1 lg:grid-cols-6 gap-4 mb-4 border-b border-[#1f1f1f] pb-4"},[t("div",null,[e[5]||(e[5]=t("label",{class:"text-gray-300 text-xs"},"Rol",-1)),p(t("select",{"onUpdate:modelValue":s=>l.role=s,class:"input"},[...e[4]||(e[4]=[t("option",{value:"label"},"Label",-1),t("option",{value:"artist"},"Artist",-1),t("option",{value:"producer"},"Producer",-1),t("option",{value:"composer"},"Composer",-1),t("option",{value:"publisher"},"Publisher",-1),t("option",{value:"manager"},"Manager",-1)])],8,G),[[g,l.role]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"text-gray-300 text-xs"},"%",-1)),p(t("input",{"onUpdate:modelValue":s=>l.percentage=s,type:"number",step:"0.01",min:"0",max:"100",class:"input"},null,8,I),[[x,l.percentage]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"text-gray-300 text-xs"},"Artista",-1)),p(t("select",{"onUpdate:modelValue":s=>l.artist_id=s,class:"input"},[e[7]||(e[7]=t("option",{value:""},"--",-1)),(r(!0),n(v,null,y(d.artists,s=>(r(),n("option",{key:s.id,value:s.id},i(s.name),9,q))),128))],8,O),[[g,l.artist_id]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"text-gray-300 text-xs"},"Nombre",-1)),p(t("input",{"onUpdate:modelValue":s=>l.name=s,type:"text",class:"input",placeholder:"Nombre libre"},null,8,z),[[x,l.name]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"text-gray-300 text-xs"},"Email",-1)),p(t("input",{"onUpdate:modelValue":s=>l.payee_email=s,type:"email",class:"input",placeholder:"email@dominio.com"},null,8,H),[[x,l.payee_email]])]),t("div",J,[t("button",{type:"button",class:"text-red-400 hover:text-red-300 text-sm",onClick:s=>h(m),disabled:o(a).participants.length===1}," Eliminar ",8,K)]),o(a).errors[`participants.${m}`]?(r(),n("p",Q,i(o(a).errors[`participants.${m}`]),1)):c("",!0)]))),128)),o(a).errors.participants?(r(),n("p",W,i(o(a).errors.participants),1)):c("",!0)]),e[11]||(e[11]=t("div",{class:"flex justify-end"},[t("button",{type:"submit",class:"btn-primary"},"Guardar Split")],-1))],32)]}),_:1}))}},at=B(X,[["__scopeId","data-v-19244cd3"]]);export{at as default};
