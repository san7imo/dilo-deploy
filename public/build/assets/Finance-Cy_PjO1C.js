import{c as ee,o,w as G,a as e,l as te,e as l,j as g,f as c,v as b,t as n,F as T,i as z,k as se,q as qe,g as x,n as U,s as Le,x as v,d as I,u as R,y as Xe,b as N,h as F,m as He}from"./app-j5_3LoO7.js";import{A as We}from"./AdminLayout-Bp634Hfd.js";import{_ as Je}from"./FinanceCharts-GauJ9daB.js";import{_ as me}from"./Modal-DkkrbIBA.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as q,a as ne,b as Z}from"./money-kgxah7JU.js";/* empty css            */import"./responsive-blanco-DOkwJ8BK.js";const Ke={class:"p-6 space-y-5 text-white"},Qe={class:"flex items-center justify-between gap-4"},Ye={key:0,class:"text-red-500 text-sm mt-1"},Ze={key:0,class:"text-red-500 text-sm mt-1"},et={key:0},tt={key:1},st=["value"],at={key:0,class:"text-red-500 text-sm mt-1"},nt={class:"flex items-center gap-2 mt-6"},ot={class:"sm:col-span-2"},lt={key:0,class:"text-red-500 text-sm mt-1"},rt={class:"sm:col-span-2 flex justify-end gap-2 mt-2"},it=["disabled"],dt={__name:"PaymentModal",props:{show:{type:Boolean,default:!1},form:{type:Object,required:!0},paymentMethodOptions:{type:Array,default:()=>[]},normalizeCurrency:{type:Function,default:null}},emits:["close","submit"],setup(t,{emit:u}){const w=t,f=u,d=()=>{typeof w.normalizeCurrency=="function"&&w.normalizeCurrency()};return(m,a)=>(o(),ee(me,{show:t.show,onClose:a[10]||(a[10]=i=>f("close"))},{default:G(()=>[e("div",Ke,[e("div",Qe,[a[11]||(a[11]=e("div",null,[e("h2",{class:"text-lg font-semibold"},"Registrar pago"),e("p",{class:"text-sm text-gray-400"},"Registra un pago y se convertirá a USD según la tasa.")],-1)),e("button",{type:"button",class:"text-gray-300 hover:text-white",onClick:a[0]||(a[0]=i=>f("close"))}," Cerrar ")]),e("form",{onSubmit:a[9]||(a[9]=te(i=>f("submit"),["prevent"])),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[e("div",null,[a[12]||(a[12]=e("label",{class:"text-gray-300 text-sm"},"Fecha",-1)),g(e("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>t.form.payment_date=i),type:"date",class:"fin-input"},null,512),[[b,t.form.payment_date]]),t.form.errors.payment_date?(o(),l("p",Ye,n(t.form.errors.payment_date),1)):c("",!0)]),e("div",null,[a[13]||(a[13]=e("label",{class:"text-gray-300 text-sm"},"Monto",-1)),g(e("input",{"onUpdate:modelValue":a[2]||(a[2]=i=>t.form.amount_original=i),type:"number",step:"0.01",class:"fin-input"},null,512),[[b,t.form.amount_original]]),t.form.errors.amount_original?(o(),l("p",Ze,n(t.form.errors.amount_original),1)):c("",!0)]),e("div",null,[a[14]||(a[14]=e("label",{class:"text-gray-300 text-sm"},"Moneda (ISO)",-1)),g(e("input",{"onUpdate:modelValue":a[3]||(a[3]=i=>t.form.currency=i),onBlur:d,type:"text",class:"fin-input",placeholder:"USD / COP / MXN..."},null,544),[[b,t.form.currency]]),a[15]||(a[15]=e("p",{class:"text-gray-500 text-xs mt-1"},"Ej: USD, COP, MXN (3 letras).",-1))]),t.form.currency!=="USD"?(o(),l("div",et,[a[16]||(a[16]=e("label",{class:"text-gray-300 text-sm"},"Tasa a USD",-1)),g(e("input",{"onUpdate:modelValue":a[4]||(a[4]=i=>t.form.exchange_rate_to_base=i),type:"number",step:"0.000001",class:"fin-input"},null,512),[[b,t.form.exchange_rate_to_base]]),a[17]||(a[17]=e("p",{class:"text-gray-500 text-xs mt-1"},"Ej: si 1 COP = 0.00025 USD, pon 0.00025",-1))])):(o(),l("div",tt,[...a[18]||(a[18]=[e("label",{class:"text-gray-300 text-sm"},"Tasa a USD",-1),e("input",{value:1,disabled:"",class:"fin-input opacity-60"},null,-1),e("p",{class:"text-gray-500 text-xs mt-1"},"USD no requiere tasa.",-1)])])),e("div",null,[a[20]||(a[20]=e("label",{class:"text-gray-300 text-sm"},"Método de pago",-1)),g(e("select",{"onUpdate:modelValue":a[5]||(a[5]=i=>t.form.payment_method=i),class:"fin-input"},[a[19]||(a[19]=e("option",{value:"",disabled:""},"Selecciona un método",-1)),(o(!0),l(T,null,z(t.paymentMethodOptions,i=>(o(),l("option",{key:i.value,value:i.value},n(i.label),9,st))),128))],512),[[se,t.form.payment_method]]),t.form.errors.payment_method?(o(),l("p",at,n(t.form.errors.payment_method),1)):c("",!0)]),e("div",nt,[g(e("input",{"onUpdate:modelValue":a[6]||(a[6]=i=>t.form.is_advance=i),type:"checkbox",class:"fin-checkbox"},null,512),[[qe,t.form.is_advance]]),a[21]||(a[21]=e("span",{class:"text-gray-300 text-sm"},"¿Es anticipo?",-1))]),e("div",ot,[a[22]||(a[22]=e("label",{class:"text-gray-300 text-sm"},"Notas",-1)),g(e("textarea",{"onUpdate:modelValue":a[7]||(a[7]=i=>t.form.notes=i),rows:"3",class:"fin-input",placeholder:"Notas adicionales sobre este pago..."},null,512),[[b,t.form.notes]]),t.form.errors.notes?(o(),l("p",lt,n(t.form.errors.notes),1)):c("",!0)]),e("div",rt,[e("button",{type:"button",class:"fin-btn-ghost",onClick:a[8]||(a[8]=i=>f("close"))}," Cancelar "),e("button",{class:"fin-btn-primary",type:"submit",disabled:t.form.processing}," Guardar pago ",8,it)])],32)])]),_:1},8,["show"]))}},ut=ae(dt,[["__scopeId","data-v-4f82d78b"]]),ct={class:"p-6 space-y-5 text-white"},mt={class:"flex items-center justify-between gap-4"},pt={key:0,class:"text-red-500 text-sm mt-1"},xt={key:0,class:"text-red-500 text-sm mt-1"},yt={key:0,class:"text-red-500 text-sm mt-1"},vt={key:0,class:"text-red-500 text-sm mt-1"},gt={key:0},bt={key:1},ft={class:"sm:col-span-2"},wt={key:0,class:"text-red-500 text-sm mt-1"},ht={class:"sm:col-span-2"},kt={key:0,class:"text-red-500 text-sm mt-1"},$t={class:"sm:col-span-2 flex justify-end gap-2 mt-2"},_t=["disabled"],St={__name:"ExpenseModal",props:{show:{type:Boolean,default:!1},form:{type:Object,required:!0},normalizeCurrency:{type:Function,default:null}},emits:["close","submit"],setup(t,{emit:u}){const w=t,f=u,d=()=>{typeof w.normalizeCurrency=="function"&&w.normalizeCurrency()};return(m,a)=>(o(),ee(me,{show:t.show,onClose:a[11]||(a[11]=i=>f("close"))},{default:G(()=>[e("div",ct,[e("div",mt,[a[12]||(a[12]=e("div",null,[e("h2",{class:"text-lg font-semibold"},"Registrar gasto"),e("p",{class:"text-sm text-gray-400"},"Registra un gasto y se convertirá a USD según la tasa.")],-1)),e("button",{type:"button",class:"text-gray-300 hover:text-white",onClick:a[0]||(a[0]=i=>f("close"))}," Cerrar ")]),e("form",{onSubmit:a[10]||(a[10]=te(i=>f("submit"),["prevent"])),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[e("div",null,[a[13]||(a[13]=e("label",{class:"text-gray-300 text-sm"},"Fecha",-1)),g(e("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>t.form.expense_date=i),type:"date",class:"fin-input"},null,512),[[b,t.form.expense_date]]),t.form.errors.expense_date?(o(),l("p",pt,n(t.form.errors.expense_date),1)):c("",!0)]),e("div",null,[a[14]||(a[14]=e("label",{class:"text-gray-300 text-sm"},"Nombre del gasto *",-1)),g(e("input",{"onUpdate:modelValue":a[2]||(a[2]=i=>t.form.name=i),type:"text",class:"fin-input",placeholder:"Ej: Vuelo, Hotel..."},null,512),[[b,t.form.name]]),t.form.errors.name?(o(),l("p",xt,n(t.form.errors.name),1)):c("",!0)]),e("div",null,[a[16]||(a[16]=e("label",{class:"text-gray-300 text-sm"},"Categoría",-1)),g(e("select",{"onUpdate:modelValue":a[3]||(a[3]=i=>t.form.category=i),class:"fin-input"},[...a[15]||(a[15]=[e("option",{value:""},"Selecciona una categoría",-1),e("option",{value:"transporte"},"Transporte",-1),e("option",{value:"hospedaje"},"Hospedaje",-1),e("option",{value:"alimentacion"},"Alimentación",-1),e("option",{value:"sonido"},"Sonido",-1),e("option",{value:"iluminacion"},"Iluminación",-1),e("option",{value:"seguridad"},"Seguridad",-1),e("option",{value:"marketing"},"Marketing",-1),e("option",{value:"fotografo"},"Fotógrafo",-1),e("option",{value:"filmmaker"},"Filmmaker",-1),e("option",{value:"visa"},"Visa",-1),e("option",{value:"ropa"},"Ropa",-1),e("option",{value:"impuestos"},"Impuestos",-1),e("option",{value:"otros"},"Otros",-1)])],512),[[se,t.form.category]]),t.form.errors.category?(o(),l("p",yt,n(t.form.errors.category),1)):c("",!0)]),e("div",null,[a[17]||(a[17]=e("label",{class:"text-gray-300 text-sm"},"Monto",-1)),g(e("input",{"onUpdate:modelValue":a[4]||(a[4]=i=>t.form.amount_original=i),type:"number",step:"0.01",class:"fin-input"},null,512),[[b,t.form.amount_original]]),t.form.errors.amount_original?(o(),l("p",vt,n(t.form.errors.amount_original),1)):c("",!0)]),e("div",null,[a[18]||(a[18]=e("label",{class:"text-gray-300 text-sm"},"Moneda (ISO)",-1)),g(e("input",{"onUpdate:modelValue":a[5]||(a[5]=i=>t.form.currency=i),onBlur:d,type:"text",class:"fin-input",placeholder:"USD / COP / MXN..."},null,544),[[b,t.form.currency]]),a[19]||(a[19]=e("p",{class:"text-gray-500 text-xs mt-1"},"Ej: USD, COP, MXN (3 letras).",-1))]),t.form.currency!=="USD"?(o(),l("div",gt,[a[20]||(a[20]=e("label",{class:"text-gray-300 text-sm"},"Tasa a USD",-1)),g(e("input",{"onUpdate:modelValue":a[6]||(a[6]=i=>t.form.exchange_rate_to_base=i),type:"number",step:"0.000001",class:"fin-input"},null,512),[[b,t.form.exchange_rate_to_base]]),a[21]||(a[21]=e("p",{class:"text-gray-500 text-xs mt-1"},"Ej: si 1 COP = 0.00025 USD, pon 0.00025",-1))])):(o(),l("div",bt,[...a[22]||(a[22]=[e("label",{class:"text-gray-300 text-sm"},"Tasa a USD",-1),e("input",{value:1,disabled:"",class:"fin-input opacity-60"},null,-1),e("p",{class:"text-gray-500 text-xs mt-1"},"USD no requiere tasa.",-1)])])),e("div",ft,[a[23]||(a[23]=e("label",{class:"text-gray-300 text-sm"},"Descripción",-1)),g(e("textarea",{"onUpdate:modelValue":a[7]||(a[7]=i=>t.form.description=i),rows:"3",class:"fin-input",placeholder:"Detalles adicionales del gasto..."},null,512),[[b,t.form.description]]),t.form.errors.description?(o(),l("p",wt,n(t.form.errors.description),1)):c("",!0)]),e("div",ht,[a[24]||(a[24]=e("label",{class:"text-gray-300 text-sm"},"Comprobante (imagen)",-1)),e("input",{type:"file",accept:"image/*",class:"fin-input",onChange:a[8]||(a[8]=i=>{t.form.receipt_file=i.target.files[0]})},null,32),t.form.errors.receipt_file?(o(),l("p",kt,n(t.form.errors.receipt_file),1)):c("",!0)]),e("div",$t,[e("button",{type:"button",class:"fin-btn-ghost",onClick:a[9]||(a[9]=i=>f("close"))}," Cancelar "),e("button",{class:"fin-btn-secondary",type:"submit",disabled:t.form.processing}," Guardar gasto ",8,_t)])],32)])]),_:1},8,["show"]))}},Dt=ae(St,[["__scopeId","data-v-29b3f190"]]),Ut={class:"p-6 space-y-5 text-white"},Ct={class:"flex items-center justify-between gap-4"},Et={class:"text-lg font-semibold"},Nt={key:0,class:"text-xs text-gray-500 mt-1"},Mt={key:1,class:"text-red-500 text-sm mt-2"},Pt={key:0,class:"text-red-500 text-sm mt-1"},jt={key:0,class:"text-red-500 text-sm mt-1"},Ot={key:0,class:"text-red-500 text-sm mt-1"},At=["value"],Vt={key:0,class:"text-red-500 text-sm mt-1"},Ft={key:0,class:"text-red-500 text-sm mt-1"},Tt={key:0,class:"text-red-500 text-sm mt-1"},zt={key:0},Bt={key:1},It={class:"sm:col-span-2"},Rt={key:0,class:"text-red-500 text-sm mt-1"},Gt={class:"sm:col-span-2 flex justify-end gap-2 mt-2"},qt=["disabled"],Lt={__name:"PersonalExpenseModal",props:{show:{type:Boolean,default:!1},form:{type:Object,required:!0},paymentMethodOptions:{type:Array,default:()=>[]},normalizeCurrency:{type:Function,default:null},remaining:{type:Number,default:null},isEditing:{type:Boolean,default:!1}},emits:["close","submit"],setup(t,{emit:u}){const w=t,f=u,d=()=>{typeof w.normalizeCurrency=="function"&&w.normalizeCurrency()};return(m,a)=>(o(),ee(me,{show:t.show,onClose:a[12]||(a[12]=i=>f("close"))},{default:G(()=>[e("div",Ut,[e("div",Ct,[e("div",null,[e("h2",Et,n(t.isEditing?"Editar gasto personal":"Registrar gasto personal"),1),a[13]||(a[13]=e("p",{class:"text-sm text-gray-400"}," Se descontará del 70% del artista. ",-1)),t.remaining!==null?(o(),l("p",Nt," Disponible: "+n(x(q)(t.remaining,"USD")),1)):c("",!0),t.form.errors.base?(o(),l("p",Mt,n(t.form.errors.base),1)):c("",!0)]),e("button",{type:"button",class:"text-gray-300 hover:text-white",onClick:a[0]||(a[0]=i=>f("close"))}," Cerrar ")]),e("form",{onSubmit:a[11]||(a[11]=te(i=>f("submit"),["prevent"])),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[e("div",null,[a[14]||(a[14]=e("label",{class:"text-gray-300 text-sm"},"Fecha",-1)),g(e("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>t.form.expense_date=i),type:"date",class:"fin-input"},null,512),[[b,t.form.expense_date]]),t.form.errors.expense_date?(o(),l("p",Pt,n(t.form.errors.expense_date),1)):c("",!0)]),e("div",null,[a[15]||(a[15]=e("label",{class:"text-gray-300 text-sm"},"Tipo de gasto",-1)),g(e("input",{"onUpdate:modelValue":a[2]||(a[2]=i=>t.form.expense_type=i),type:"text",class:"fin-input",placeholder:"Ej: Viáticos"},null,512),[[b,t.form.expense_type]]),t.form.errors.expense_type?(o(),l("p",jt,n(t.form.errors.expense_type),1)):c("",!0)]),e("div",null,[a[16]||(a[16]=e("label",{class:"text-gray-300 text-sm"},"Nombre del gasto *",-1)),g(e("input",{"onUpdate:modelValue":a[3]||(a[3]=i=>t.form.name=i),type:"text",class:"fin-input",placeholder:"Ej: Hotel"},null,512),[[b,t.form.name]]),t.form.errors.name?(o(),l("p",Ot,n(t.form.errors.name),1)):c("",!0)]),e("div",null,[a[18]||(a[18]=e("label",{class:"text-gray-300 text-sm"},"Método del gasto *",-1)),g(e("select",{"onUpdate:modelValue":a[4]||(a[4]=i=>t.form.payment_method=i),class:"fin-input"},[a[17]||(a[17]=e("option",{value:"",disabled:""},"Selecciona un método",-1)),(o(!0),l(T,null,z(t.paymentMethodOptions,i=>(o(),l("option",{key:i.value,value:i.value},n(i.label),9,At))),128))],512),[[se,t.form.payment_method]]),t.form.errors.payment_method?(o(),l("p",Vt,n(t.form.errors.payment_method),1)):c("",!0)]),e("div",null,[a[19]||(a[19]=e("label",{class:"text-gray-300 text-sm"},"Destinatario",-1)),g(e("input",{"onUpdate:modelValue":a[5]||(a[5]=i=>t.form.recipient=i),type:"text",class:"fin-input",placeholder:"Ej: Nombre o contacto"},null,512),[[b,t.form.recipient]]),t.form.errors.recipient?(o(),l("p",Ft,n(t.form.errors.recipient),1)):c("",!0)]),e("div",null,[a[20]||(a[20]=e("label",{class:"text-gray-300 text-sm"},"Monto",-1)),g(e("input",{"onUpdate:modelValue":a[6]||(a[6]=i=>t.form.amount_original=i),type:"number",step:"0.01",class:"fin-input"},null,512),[[b,t.form.amount_original]]),t.form.errors.amount_original?(o(),l("p",Tt,n(t.form.errors.amount_original),1)):c("",!0)]),e("div",null,[a[21]||(a[21]=e("label",{class:"text-gray-300 text-sm"},"Moneda (ISO)",-1)),g(e("input",{"onUpdate:modelValue":a[7]||(a[7]=i=>t.form.currency=i),onBlur:d,type:"text",class:"fin-input",placeholder:"USD / COP / MXN..."},null,544),[[b,t.form.currency]]),a[22]||(a[22]=e("p",{class:"text-gray-500 text-xs mt-1"},"Ej: USD, COP, MXN (3 letras).",-1))]),t.form.currency!=="USD"?(o(),l("div",zt,[a[23]||(a[23]=e("label",{class:"text-gray-300 text-sm"},"Tasa a USD",-1)),g(e("input",{"onUpdate:modelValue":a[8]||(a[8]=i=>t.form.exchange_rate_to_base=i),type:"number",step:"0.000001",class:"fin-input"},null,512),[[b,t.form.exchange_rate_to_base]]),a[24]||(a[24]=e("p",{class:"text-gray-500 text-xs mt-1"},"Ej: si 1 COP = 0.00025 USD, pon 0.00025",-1))])):(o(),l("div",Bt,[...a[25]||(a[25]=[e("label",{class:"text-gray-300 text-sm"},"Tasa a USD",-1),e("input",{value:1,disabled:"",class:"fin-input opacity-60"},null,-1),e("p",{class:"text-gray-500 text-xs mt-1"},"USD no requiere tasa.",-1)])])),e("div",It,[a[26]||(a[26]=e("label",{class:"text-gray-300 text-sm"},"Descripción",-1)),g(e("textarea",{"onUpdate:modelValue":a[9]||(a[9]=i=>t.form.description=i),rows:"3",class:"fin-input",placeholder:"Detalles adicionales del gasto..."},null,512),[[b,t.form.description]]),t.form.errors.description?(o(),l("p",Rt,n(t.form.errors.description),1)):c("",!0)]),e("div",Gt,[e("button",{type:"button",class:"fin-btn-ghost",onClick:a[10]||(a[10]=i=>f("close"))}," Cancelar "),e("button",{class:"fin-btn-secondary",type:"submit",disabled:t.form.processing},n(t.isEditing?"Guardar cambios":"Guardar gasto"),9,qt)])],32)])]),_:1},8,["show"]))}},Xt=ae(Lt,[["__scopeId","data-v-670f7d53"]]),j=t=>{if(!t)return"—";const u=new Date(t);return Number.isNaN(u.getTime())?t:u.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})},Ht={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},Wt={key:0,class:"text-gray-400"},Jt={key:1,class:"overflow-x-auto"},Kt={class:"min-w-full text-sm text-gray-300"},Qt={class:"text-xs uppercase text-gray-400"},Yt={key:0,class:"py-2 text-right"},Zt={class:"py-2 whitespace-nowrap"},es={class:"py-2 whitespace-nowrap"},ts={class:"py-2 whitespace-nowrap"},ss={class:"py-2 whitespace-nowrap capitalize"},as={class:"py-2 whitespace-nowrap"},ns={class:"py-2 max-w-[280px]"},os={class:"text-gray-300"},ls={key:0,class:"py-2 text-right whitespace-nowrap"},rs=["onClick"],Se={__name:"PaymentsTable",props:{payments:{type:Array,default:()=>[]},canDelete:{type:Boolean,default:!0}},emits:["delete"],setup(t,{emit:u}){const w=u;return(f,d)=>(o(),l("div",Ht,[!t.payments||t.payments.length===0?(o(),l("div",Wt," No hay pagos todavía. ")):(o(),l("div",Jt,[e("table",Kt,[e("thead",Qt,[e("tr",null,[d[0]||(d[0]=e("th",{class:"py-2 text-left"},"Fecha",-1)),d[1]||(d[1]=e("th",{class:"py-2 text-left"},"Original",-1)),d[2]||(d[2]=e("th",{class:"py-2 text-left"},"USD",-1)),d[3]||(d[3]=e("th",{class:"py-2 text-left"},"Método",-1)),d[4]||(d[4]=e("th",{class:"py-2 text-left"},"Anticipo",-1)),d[5]||(d[5]=e("th",{class:"py-2 text-left"},"Notas",-1)),t.canDelete?(o(),l("th",Yt,"Acciones")):c("",!0)])]),e("tbody",null,[(o(!0),l(T,null,z(t.payments,m=>(o(),l("tr",{key:m.id,class:"border-t border-[#2a2a2a]"},[e("td",Zt,n(x(j)(m.payment_date)),1),e("td",es,n(x(q)(m.amount_original,m.currency)),1),e("td",ts,n(x(ne)(m.amount_base)),1),e("td",ss,n(m.payment_method||"—"),1),e("td",as,[e("span",{class:U(["px-2 py-1 rounded text-xs",m.is_advance?"bg-[#ffa236]/15 text-[#ffa236] border border-[#ffa236]/30":"bg-[#2a2a2a] text-gray-300"])},n(m.is_advance?"Sí":"No"),3)]),e("td",ns,[e("span",os,n((m.notes||"").trim()||"—"),1)]),t.canDelete?(o(),l("td",ls,[e("button",{onClick:a=>w("delete",m.id),class:"text-red-400 hover:underline"}," Eliminar ",8,rs)])):c("",!0)]))),128))])])]))]))}},is={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},ds={key:0,class:"text-gray-400"},us={key:1,class:"overflow-x-auto"},cs={class:"min-w-full text-sm text-gray-300"},ms={class:"text-xs uppercase text-gray-400"},ps={key:0,class:"py-2 text-right"},xs={class:"py-2 whitespace-nowrap"},ys={class:"py-2 font-semibold whitespace-nowrap"},vs={class:"py-2 whitespace-nowrap"},gs={key:0,class:"bg-[#2a2a2a] text-gray-300 px-2 py-1 rounded text-xs capitalize"},bs={key:1,class:"text-gray-500"},fs={class:"py-2 whitespace-nowrap"},ws={class:"py-2 whitespace-nowrap"},hs={class:"py-2 max-w-[280px]"},ks={class:"text-gray-300"},$s={class:"py-2 whitespace-nowrap"},_s=["href"],Ss={key:1,class:"text-gray-500"},Ds={key:0,class:"py-2 text-right whitespace-nowrap"},Us=["onClick"],De={__name:"ExpensesTable",props:{expenses:{type:Array,default:()=>[]},canDelete:{type:Boolean,default:!0}},emits:["delete"],setup(t,{emit:u}){const w=u;return(f,d)=>(o(),l("div",is,[!t.expenses||t.expenses.length===0?(o(),l("div",ds," No hay gastos registrados. ")):(o(),l("div",us,[e("table",cs,[e("thead",ms,[e("tr",null,[d[0]||(d[0]=e("th",{class:"py-2 text-left"},"Fecha",-1)),d[1]||(d[1]=e("th",{class:"py-2 text-left"},"Nombre",-1)),d[2]||(d[2]=e("th",{class:"py-2 text-left"},"Categoría",-1)),d[3]||(d[3]=e("th",{class:"py-2 text-left"},"Original",-1)),d[4]||(d[4]=e("th",{class:"py-2 text-left"},"USD",-1)),d[5]||(d[5]=e("th",{class:"py-2 text-left"},"Descripción",-1)),d[6]||(d[6]=e("th",{class:"py-2 text-left"},"Comprobante",-1)),t.canDelete?(o(),l("th",ps,"Acciones")):c("",!0)])]),e("tbody",null,[(o(!0),l(T,null,z(t.expenses,m=>(o(),l("tr",{key:m.id,class:"border-t border-[#2a2a2a]"},[e("td",xs,n(x(j)(m.expense_date)),1),e("td",ys,n(m.name||"—"),1),e("td",vs,[m.category?(o(),l("span",gs,n(m.category),1)):(o(),l("span",bs,"—"))]),e("td",fs,n(x(q)(m.amount_original,m.currency)),1),e("td",ws,n(x(ne)(m.amount_base)),1),e("td",hs,[e("span",ks,n((m.description||"").trim()||"—"),1)]),e("td",$s,[m.receipt_url?(o(),l("a",{key:0,href:m.receipt_url,target:"_blank",rel:"noopener",class:"text-[#ffa236] hover:underline"}," Ver ",8,_s)):(o(),l("span",Ss,"—"))]),t.canDelete?(o(),l("td",Ds,[e("button",{onClick:a=>w("delete",m.id),class:"text-red-400 hover:underline"}," Eliminar ",8,Us)])):c("",!0)]))),128))])])]))]))}},Cs={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},Es={key:0,class:"text-gray-400"},Ns={key:1,class:"overflow-x-auto"},Ms={class:"min-w-full text-sm text-gray-300"},Ps={class:"text-xs uppercase text-gray-400"},js={key:0,class:"py-2 text-right"},Os={class:"py-2 whitespace-nowrap"},As={class:"py-2 whitespace-nowrap"},Vs={key:0,class:"bg-[#2a2a2a] text-gray-300 px-2 py-1 rounded text-xs capitalize"},Fs={key:1,class:"text-gray-500"},Ts={class:"py-2 font-semibold whitespace-nowrap"},zs={class:"py-2 whitespace-nowrap"},Bs={class:"py-2 whitespace-nowrap"},Is={class:"py-2 whitespace-nowrap"},Rs={class:"py-2 whitespace-nowrap"},Gs={class:"py-2 max-w-[280px]"},qs={class:"text-gray-300"},Ls={key:0,class:"py-2 text-right whitespace-nowrap"},Xs=["onClick"],Hs=["onClick"],Ws={__name:"PersonalExpensesTable",props:{expenses:{type:Array,default:()=>[]},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1}},emits:["edit","delete"],setup(t,{emit:u}){const w=u;return(f,d)=>(o(),l("div",Cs,[!t.expenses||t.expenses.length===0?(o(),l("div",Es," No hay gastos personales registrados. ")):(o(),l("div",Ns,[e("table",Ms,[e("thead",Ps,[e("tr",null,[d[0]||(d[0]=e("th",{class:"py-2 text-left"},"Fecha",-1)),d[1]||(d[1]=e("th",{class:"py-2 text-left"},"Tipo",-1)),d[2]||(d[2]=e("th",{class:"py-2 text-left"},"Nombre",-1)),d[3]||(d[3]=e("th",{class:"py-2 text-left"},"Método",-1)),d[4]||(d[4]=e("th",{class:"py-2 text-left"},"Destinatario",-1)),d[5]||(d[5]=e("th",{class:"py-2 text-left"},"Original",-1)),d[6]||(d[6]=e("th",{class:"py-2 text-left"},"USD",-1)),d[7]||(d[7]=e("th",{class:"py-2 text-left"},"Descripción",-1)),t.canEdit||t.canDelete?(o(),l("th",js,"Acciones")):c("",!0)])]),e("tbody",null,[(o(!0),l(T,null,z(t.expenses,m=>(o(),l("tr",{key:m.id,class:"border-t border-[#2a2a2a]"},[e("td",Os,n(x(j)(m.expense_date)),1),e("td",As,[m.expense_type?(o(),l("span",Vs,n(m.expense_type),1)):(o(),l("span",Fs,"—"))]),e("td",Ts,n(m.name||"—"),1),e("td",zs,n(m.payment_method||"—"),1),e("td",Bs,n(m.recipient||"—"),1),e("td",Is,n(x(q)(m.amount_original,m.currency)),1),e("td",Rs,n(x(ne)(m.amount_base)),1),e("td",Gs,[e("span",qs,n((m.description||"").trim()||"—"),1)]),t.canEdit||t.canDelete?(o(),l("td",Ls,[t.canEdit?(o(),l("button",{key:0,onClick:a=>w("edit",m),class:"text-[#ffa236] hover:underline mr-3"}," Editar ",8,Xs)):c("",!0),t.canDelete?(o(),l("button",{key:1,onClick:a=>w("delete",m.id),class:"text-red-400 hover:underline"}," Eliminar ",8,Hs)):c("",!0)])):c("",!0)]))),128))])])]))]))}},Js={class:"space-y-6 text-white"},Ks={class:"flex items-center justify-between gap-4"},Qs={class:"flex flex-wrap items-center gap-3"},Ys={class:"text-2xl font-bold"},Zs={class:"text-gray-400 text-sm mt-2 space-y-1"},ea={class:"text-white"},ta={class:"text-white"},sa={key:0},aa={key:0,class:"block text-gray-400 text-xs"},na={key:1,class:"block text-gray-500 text-xs"},oa={key:1},la={class:"text-white"},ra={key:0,class:"block text-gray-500 text-xs"},ia={class:"flex items-center gap-3"},da={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},ua={class:"card"},ca={class:"text-white text-xl font-semibold"},ma={class:"card"},pa={class:"text-white text-xl font-semibold"},xa={class:"card"},ya={class:"text-red-400 text-xl font-semibold"},va={class:"card"},ga={class:"text-white text-xl font-semibold"},ba={class:"card"},fa={class:"text-white text-xl font-semibold"},wa={class:"card"},ha={class:"text-[#ffa236] text-xl font-semibold"},ka={class:"card"},$a={class:"text-red-400 text-xl font-semibold"},_a={class:"card"},Sa={class:"text-[#ffa236] text-xl font-semibold"},Da={key:1,class:"space-y-6"},Ua={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},Ca={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Ea={class:"text-2xl font-semibold text-[#ffa236] mt-2"},Na={class:"text-sm text-gray-300"},Ma=["disabled"],Pa={key:1,class:"text-green-400 font-semibold"},ja={key:0,class:"block text-xs text-gray-400 mt-1"},Oa={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},Aa={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},Va={class:"mini-card"},Fa={class:"text-white font-semibold"},Ta={key:0},za={key:1},Ba={key:0,class:"text-gray-400 text-xs mt-1"},Ia={key:1,class:"text-gray-500 text-xs mt-1"},Ra={class:"mini-card"},Ga={class:"text-white font-semibold capitalize"},qa={class:"mini-card"},La={class:"text-white font-semibold"},Xa={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ha={class:"card"},Wa={class:"text-white text-xl font-semibold"},Ja={class:"card"},Ka={class:"text-red-400 text-xl font-semibold"},Qa={class:"space-y-4"},Ya={class:"flex flex-wrap items-center justify-between gap-3 bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-5"},Za={class:"text-sm text-gray-400"},en={class:"space-y-4"},tn={class:"flex flex-wrap items-center justify-between gap-3 bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-5"},sn={class:"text-sm text-gray-400"},an={key:2},nn={class:"font-semibold"},on={class:"opacity-90 mt-1"},ln={class:"flex flex-wrap gap-2 border-b border-[#2a2a2a] pb-3"},rn={key:1,class:"space-y-6"},dn={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},un={class:"flex items-center justify-between mb-4"},cn=["disabled"],mn={key:0,class:"text-red-500 text-sm mt-1"},pn={key:1,class:"text-amber-300 text-xs mt-1"},xn={key:0,class:"text-red-500 text-sm mt-1"},yn={key:0,class:"text-red-500 text-sm mt-1"},vn={class:"sm:col-span-3 flex justify-end"},gn=["disabled"],bn={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},fn={class:"flex items-center justify-between mb-3"},wn={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm"},hn={class:"mini-card"},kn={class:"mini-card"},$n={class:"text-gray-300 text-sm mt-1"},_n={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},Sn={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},Dn={class:"mini-card"},Un={class:"text-white font-semibold"},Cn={key:0},En={key:1},Nn={key:0,class:"text-gray-400 text-xs mt-1"},Mn={key:1,class:"text-gray-500 text-xs mt-1"},Pn={class:"mini-card"},jn={class:"text-white font-semibold capitalize"},On={class:"mini-card"},An={class:"text-white font-semibold"},Vn={class:"ml-1"},Fn={class:"text-white font-semibold"},Tn={class:"mini-card"},zn={class:"text-white font-semibold"},Bn={class:"text-white font-semibold"},In={class:"mini-card"},Rn={class:"text-white font-semibold"},Gn={class:"mini-card"},qn={class:"text-white font-semibold"},Ln={key:0,class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},Xn={class:"space-y-3 text-sm"},Hn={class:"text-white font-semibold"},Wn={class:"text-gray-400 text-xs"},Jn={class:"text-sm"},Kn={key:0,class:"text-green-400 font-semibold"},Qn={class:"block text-xs text-gray-400"},Yn={key:1,class:"text-yellow-400 font-semibold"},Zn={key:2,class:"space-y-4"},eo={class:"flex flex-wrap items-center justify-between gap-3 bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-5"},to={class:"text-sm text-gray-400"},so={key:3,class:"space-y-4"},ao={class:"flex flex-wrap items-center justify-between gap-3 bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-5"},no={class:"text-sm text-gray-400"},oo={key:4,class:"space-y-4"},lo={class:"flex flex-wrap items-center justify-between gap-3 bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-5"},ro={class:"text-sm text-gray-400"},io={class:"text-xs text-gray-500 mt-1"},uo=["disabled"],co={key:0,class:"rounded-lg border border-amber-500/40 bg-amber-500/10 p-4"},mo={key:5,class:"space-y-6"},po={__name:"Finance",props:{event:{type:Object,required:!0},finance:{type:Object,default:()=>({})}},setup(t){const u=t,{props:w}=Le(),f=v(()=>{var r,s;return((s=(r=w.auth)==null?void 0:r.user)==null?void 0:s.role_names)||[]}),d=v(()=>f.value.includes("admin")),m=v(()=>f.value.includes("roadmanager")),a=I("resumen"),i=I(!1),L=I(!1),O=I(!1),Ue=[{value:"transferencia",label:"Transferencia bancaria"},{value:"efectivo",label:"Efectivo"},{value:"tarjeta",label:"Tarjeta"},{value:"paypal",label:"PayPal"},{value:"otro",label:"Otro"}],Ce=[{value:"transferencia",label:"Transferencia bancaria"},{value:"efectivo",label:"Efectivo"},{value:"tercero",label:"Enviado a otra persona"},{value:"otro",label:"Otro"}],pe=r=>{if(!r)return"";const s=String(r);return s.includes("T")?s.split("T")[0]:s.includes(" ")?s.split(" ")[0]:s},h=R({payment_date:new Date().toISOString().slice(0,10),amount_original:"",currency:"USD",exchange_rate_to_base:1,payment_method:"",is_advance:!1,notes:""}),k=R({expense_date:new Date().toISOString().slice(0,10),name:"",description:"",category:"",receipt_file:null,amount_original:"",currency:"USD",exchange_rate_to_base:1}),p=R({expense_date:new Date().toISOString().slice(0,10),expense_type:"",name:"",description:"",payment_method:"",recipient:"",amount_original:"",currency:"USD",exchange_rate_to_base:1}),S=R({status:u.event.status||"",event_date:pe(u.event.event_date),full_payment_due_date:pe(u.event.full_payment_due_date)}),oe=R({confirmed:!0}),le=v(()=>u.event.road_managers||u.event.roadManagers||[]),Ee=v(()=>u.event.personal_expenses||u.event.personalExpenses||[]),C=I(null),Ne=v(()=>{var s,_;if(!m.value)return null;const r=(_=(s=w.auth)==null?void 0:s.user)==null?void 0:_.id;return le.value.find(D=>D.id===r)||null}),X=v(()=>{var r,s;return((s=(r=Ne.value)==null?void 0:r.pivot)==null?void 0:s.payment_confirmed_at)||null}),Me=v(()=>{const r=Number(u.event.show_fee_total??0),s=Number(u.event.advance_percentage??0),_=Number.isFinite(s)?s:0,D=Math.min(Math.max(_,0),100),y=r*(1-D/100);return Number.isFinite(y)?y:0});Xe(d,r=>{r||(a.value="pagos")},{immediate:!0});const E=v(()=>{var D,y,P,B;const r=Number(((D=u.finance)==null?void 0:D.total_paid_base)??0),s=Number(((y=u.finance)==null?void 0:y.total_expenses_base)??0),_=r-s;return{paid:r,expenses:s,net:_,shareLabel:Number(((P=u.finance)==null?void 0:P.share_label)??_*.3),shareArtist:Number(((B=u.finance)==null?void 0:B.share_artist)??_*.7)}}),H=v(()=>{var r;return Number(((r=u.finance)==null?void 0:r.total_personal_expenses_base)??0)}),xe=v(()=>{var r,s;return typeof((r=u.finance)==null?void 0:r.share_artist_after_personal)<"u"?Number(((s=u.finance)==null?void 0:s.share_artist_after_personal)??0):Math.max(E.value.shareArtist-H.value,0)}),A=v(()=>Math.max(E.value.shareArtist-H.value,0)),Pe=v(()=>{if(!C.value)return A.value;const r=Number(C.value.amount_base??0);return Math.max(A.value+r,0)}),W=v(()=>{var r,s;return{paid:Number(((r=u.finance)==null?void 0:r.total_paid_base)??0),expenses:Number(((s=u.finance)==null?void 0:s.total_expenses_base)??0)}}),re=v(()=>{var r;return Number(((r=u.finance)==null?void 0:r.total_paid_base)??0)}),M=v(()=>Number(u.event.show_fee_total??0)),V=v(()=>M.value>0&&re.value>=M.value),ye=v(()=>M.value<=0?0:Math.max(M.value-re.value,0)),ie=v(()=>M.value<=0?0:Math.max(re.value-M.value,0)),J=v(()=>{if(M.value<=0)return{label:"Sin fee",className:"bg-gray-500/20 text-gray-300 border border-gray-500/30"};const r=V.value;return{label:r?"Pagado":"Pendiente",className:r?"bg-green-500/20 text-green-300 border border-green-500/40":"bg-yellow-500/20 text-yellow-300 border border-yellow-500/40"}}),de=v(()=>M.value<=0?"Define el fee del show para calcular el estado de pago.":V.value?ie.value>0?`Pago completo. Excedente: $${Z(ie.value)} USD.`:"Pago completo.":`Faltan $${Z(ye.value)} USD para completar el pago.`),ve=(r,s="USD")=>q(r,s),$=r=>ne(r,"$"),ge=r=>`${r>=0?"+":"-"} $${Z(Math.abs(r))}`,K=v(()=>(S.status||u.event.status||"").toString().trim().toLowerCase()),Q=v(()=>{const r=K.value;if(!r)return{label:"Sin estado",className:"bg-gray-500/20 text-gray-300 border border-gray-500/30"};const s={cotizado:"Cotizado",reservado:"Reservado",confirmado:"Confirmado",pospuesto:"Pospuesto",pagado:"Pagado",cancelado:"Cancelado"},_={cotizado:"bg-gray-500/20 text-gray-200 border border-gray-500/30",reservado:"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30",confirmado:"bg-blue-500/20 text-blue-300 border border-blue-500/30",pospuesto:"bg-orange-500/20 text-orange-300 border border-orange-500/30",pagado:"bg-green-500/20 text-green-300 border border-green-500/30",cancelado:"bg-red-500/20 text-red-300 border border-red-500/30"};return{label:s[r]||r,className:_[r]||"bg-gray-500/20 text-gray-300 border border-gray-500/30"}}),Y=v(()=>{const r=K.value;return r==="pospuesto"?{title:"Evento pospuesto",message:"Actualiza la nueva fecha y confirma el plan con el equipo.",className:"bg-orange-500/10 border border-orange-500/30 text-orange-200"}:r==="cancelado"?{title:"Evento cancelado",message:"Revisa pagos y gastos para cerrar la contabilidad.",className:"bg-red-500/10 border border-red-500/30 text-red-200"}:null}),je=v(()=>{var r,s,_,D,y,P,B,$e,_e;return u.event?[{...u.event,title:u.event.title||u.event.name||"Evento",event_date:u.event.event_date||new Date().toISOString(),status:u.event.is_paid?"pagado":"pendiente",total_paid_base:((r=u.finance)==null?void 0:r.total_paid_base)??0,total_expenses_base:((s=u.finance)==null?void 0:s.total_expenses_base)??0,total_personal_expenses_base:((_=u.finance)==null?void 0:_.total_personal_expenses_base)??0,net_base:(((D=u.finance)==null?void 0:D.total_paid_base)??0)-(((y=u.finance)==null?void 0:y.total_expenses_base)??0),label_share_estimated_base:((P=u.finance)==null?void 0:P.share_label)??0,artist_share_estimated_base:((B=u.finance)==null?void 0:B.share_artist)??0,artist_share_after_personal_base:(($e=u.finance)==null?void 0:$e.share_artist_after_personal)??((_e=u.finance)==null?void 0:_e.share_artist_after_personal_base)??0}]:[]}),be=()=>{const r=(h.currency||"").toUpperCase().trim();h.currency=r||"USD",(h.currency==="USD"||!h.exchange_rate_to_base||Number(h.exchange_rate_to_base)<=0)&&(h.exchange_rate_to_base=1)},fe=()=>{const r=(k.currency||"").toUpperCase().trim();k.currency=r||"USD",(k.currency==="USD"||!k.exchange_rate_to_base||Number(k.exchange_rate_to_base)<=0)&&(k.exchange_rate_to_base=1)},we=()=>{const r=(p.currency||"").toUpperCase().trim();p.currency=r||"USD",(p.currency==="USD"||!p.exchange_rate_to_base||Number(p.exchange_rate_to_base)<=0)&&(p.exchange_rate_to_base=1)},Oe=()=>{be(),h.post(route("admin.events.payments.store",u.event.id),{preserveScroll:!0,onSuccess:()=>{h.reset("amount_original","payment_method","is_advance","notes"),i.value=!1,a.value="pagos"}})},he=r=>{d.value&&confirm("¿Eliminar este pago?")&&h.delete(route("admin.events.payments.destroy",r),{preserveScroll:!0})},Ae=()=>{fe(),k.post(route("admin.events.expenses.store",u.event.id),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{k.reset("amount_original","name","description","category","receipt_file"),L.value=!1,a.value="gastos"}})},ke=r=>{d.value&&confirm("¿Eliminar este gasto?")&&k.delete(route("admin.events.expenses.destroy",r),{preserveScroll:!0})},Ve=()=>{we();const r=!!C.value,s=r?route("admin.events.personal-expenses.update",C.value.id):route("admin.events.personal-expenses.store",u.event.id);p[r?"put":"post"](s,{preserveScroll:!0,onSuccess:()=>{p.reset("amount_original","expense_type","name","description","payment_method","recipient"),C.value=null,O.value=!1,a.value="gastos-personales"}})},Fe=r=>{d.value&&confirm("¿Eliminar este gasto personal?")&&p.delete(route("admin.events.personal-expenses.destroy",r),{preserveScroll:!0,onSuccess:()=>{var s;((s=C.value)==null?void 0:s.id)===r&&(C.value=null,O.value=!1)}})},Te=()=>{S.patch(route("admin.events.details.update",u.event.id),{preserveScroll:!0})},ze=()=>{oe.processing||X.value||oe.patch(route("admin.events.roadmanager-payment.update",u.event.id),{preserveScroll:!0})},Be=v(()=>K.value!=="pagado"||V.value),ue=()=>{h.payment_date=new Date().toISOString().slice(0,10),h.currency=(h.currency||"USD").toUpperCase().trim()||"USD",h.currency==="USD"&&(h.exchange_rate_to_base=1),i.value=!0},ce=()=>{k.expense_date=new Date().toISOString().slice(0,10),k.currency=(k.currency||"USD").toUpperCase().trim()||"USD",k.currency==="USD"&&(k.exchange_rate_to_base=1),L.value=!0},Ie=()=>{if(A.value<=0){alert("No puedes agregar más gastos personales porque el 70% del artista ya está en 0.");return}C.value=null,p.clearErrors(),p.expense_date=new Date().toISOString().slice(0,10),p.expense_type="",p.name="",p.description="",p.payment_method="",p.recipient="",p.amount_original="",p.currency=(p.currency||"USD").toUpperCase().trim()||"USD",p.exchange_rate_to_base=1,p.currency==="USD"&&(p.exchange_rate_to_base=1),O.value=!0},Re=r=>{r&&(C.value=r,p.clearErrors(),p.expense_date=r.expense_date||new Date().toISOString().slice(0,10),p.expense_type=r.expense_type||"",p.name=r.name||"",p.description=r.description||"",p.payment_method=r.payment_method||"",p.recipient=r.recipient||"",p.amount_original=r.amount_original??"",p.currency=(r.currency||"USD").toUpperCase().trim()||"USD",p.exchange_rate_to_base=r.exchange_rate_to_base??p.exchange_rate_to_base??1,O.value=!0)},Ge=()=>{O.value=!1,C.value=null};return(r,s)=>(o(),ee(We,{title:"Finanzas"},{default:G(()=>{var _,D;return[e("div",Js,[e("div",Ks,[e("div",null,[e("div",Qs,[e("h1",Ys,"Finanzas — "+n(t.event.title),1),m.value?c("",!0):(o(),l("span",{key:0,class:U(["px-3 py-1 text-xs font-semibold rounded-full capitalize border",J.value.className])},n(J.value.label),3))]),e("div",Zs,[e("p",null,[s[10]||(s[10]=F(" Artista principal: ",-1)),e("span",ea,n(((_=t.event.main_artist)==null?void 0:_.name)||((D=t.event.mainArtist)==null?void 0:D.name)||"—"),1)]),e("p",null,[s[11]||(s[11]=F(" Ubicación: ",-1)),e("span",ta,[t.event.city||t.event.country?(o(),l("span",sa,[F(n(t.event.city)+n(t.event.city&&t.event.country?",":"")+" "+n(t.event.country)+" ",1),t.event.location?(o(),l("span",aa,n(t.event.location),1)):c("",!0),t.event.venue_address?(o(),l("span",na,n(t.event.venue_address),1)):c("",!0)])):(o(),l("span",oa,[e("span",la,n(t.event.location||"—"),1),t.event.venue_address?(o(),l("span",ra,n(t.event.venue_address),1)):c("",!0)]))])])])]),e("div",ia,[N(x(He),{href:r.route("admin.events.index"),class:"text-[#ffa236] hover:underline"},{default:G(()=>[...s[12]||(s[12]=[F(" ← Volver ",-1)])]),_:1},8,["href"])])]),m.value?c("",!0):(o(),l("div",da,[e("div",ua,[s[13]||(s[13]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Fee negociado",-1)),e("p",ca,n(ve(M.value,t.event.currency||"USD")),1),s[14]||(s[14]=e("p",{class:"text-gray-500 text-xs mt-1"},"Total acordado para el show.",-1))]),e("div",ma,[s[15]||(s[15]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Total pagado",-1)),e("p",pa,n($(E.value.paid)),1),s[16]||(s[16]=e("p",{class:"text-gray-500 text-xs mt-1"},"Pagos registrados (USD).",-1))]),e("div",xa,[s[17]||(s[17]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Gastos del evento",-1)),e("p",ya,n($(E.value.expenses)),1),s[18]||(s[18]=e("p",{class:"text-gray-500 text-xs mt-1"},"Gastos generales (USD).",-1))]),e("div",va,[s[19]||(s[19]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Neto del evento",-1)),e("p",ga,n($(E.value.net)),1),s[20]||(s[20]=e("p",{class:"text-gray-500 text-xs mt-1"},"Pagos − gastos.",-1))]),e("div",ba,[s[21]||(s[21]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"30% Dilo",-1)),e("p",fa,n($(E.value.shareLabel)),1),s[22]||(s[22]=e("p",{class:"text-gray-500 text-xs mt-1"},"Sobre neto (USD).",-1))]),e("div",wa,[s[23]||(s[23]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"70% Artista (antes)",-1)),e("p",ha,n($(E.value.shareArtist)),1),s[24]||(s[24]=e("p",{class:"text-gray-500 text-xs mt-1"},"Sobre neto (USD).",-1))]),e("div",ka,[s[25]||(s[25]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Gastos personales",-1)),e("p",$a,n($(H.value)),1),s[26]||(s[26]=e("p",{class:"text-gray-500 text-xs mt-1"},"Descuento al 70%.",-1))]),e("div",_a,[s[27]||(s[27]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"70% Artista (después)",-1)),e("p",Sa,n($(xe.value)),1),s[28]||(s[28]=e("p",{class:"text-gray-500 text-xs mt-1"},"70% − gastos personales.",-1))])])),m.value?(o(),l("div",Da,[e("div",Ua,[e("div",Ca,[e("div",null,[s[29]||(s[29]=e("h2",{class:"text-lg font-semibold"},"Pago pendiente al road manager",-1)),s[30]||(s[30]=e("p",{class:"text-sm text-gray-400"}," Corresponde al porcentaje restante despues del adelanto. ",-1)),e("p",Ea,n(ve(Me.value,t.event.currency||"USD")),1)]),e("div",Na,[X.value?(o(),l("div",Pa,[s[31]||(s[31]=F(" Pago confirmado ",-1)),X.value?(o(),l("span",ja,n(x(j)(X.value)),1)):c("",!0)])):(o(),l("button",{key:0,type:"button",class:"btn-primary",disabled:x(oe).processing,onClick:ze}," Confirmar pago recibido ",8,Ma))])])]),e("div",Oa,[s[36]||(s[36]=e("div",{class:"flex items-center justify-between mb-4"},[e("div",null,[e("h2",{class:"text-lg font-semibold"},"Información del evento"),e("p",{class:"text-sm text-gray-400"},"Detalles generales del show.")])],-1)),e("div",Aa,[e("div",Va,[s[32]||(s[32]=e("p",{class:"text-gray-400"},"Ubicación",-1)),e("p",Fa,[t.event.city||t.event.country?(o(),l("span",Ta,n(t.event.city)+n(t.event.city&&t.event.country?",":"")+" "+n(t.event.country),1)):(o(),l("span",za,n(t.event.location||"—"),1))]),t.event.location?(o(),l("p",Ba,n(t.event.location),1)):c("",!0),t.event.venue_address?(o(),l("p",Ia,n(t.event.venue_address),1)):c("",!0)]),e("div",Ra,[s[33]||(s[33]=e("p",{class:"text-gray-400"},"Tipo de evento",-1)),e("p",Ga,n(t.event.event_type||"—"),1),s[34]||(s[34]=e("p",{class:"text-gray-400 mt-2"},"Estado",-1)),e("span",{class:U(["inline-flex px-2 py-1 rounded-full text-xs font-semibold border mt-1",Q.value.className])},n(Q.value.label),3)]),e("div",qa,[s[35]||(s[35]=e("p",{class:"text-gray-400"},"Fecha del evento",-1)),e("p",La,n(t.event.event_date?x(j)(t.event.event_date):"—"),1)])])]),e("div",Xa,[e("div",Ha,[s[37]||(s[37]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Total pagos registrados por ti",-1)),e("p",Wa,n($(W.value.paid)),1)]),e("div",Ja,[s[38]||(s[38]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Total gastos registrados por ti",-1)),e("p",Ka,n($(W.value.expenses)),1)])]),e("div",Qa,[e("div",Ya,[e("div",null,[s[39]||(s[39]=e("h2",{class:"text-lg font-semibold"},"Tus pagos",-1)),e("p",Za,"Total: "+n($(W.value.paid)),1)]),e("button",{type:"button",class:"btn-primary",onClick:ue},"+ Nuevo pago")]),N(Se,{payments:t.event.payments||[],"can-delete":!1,onDelete:he},null,8,["payments"])]),e("div",en,[e("div",tn,[e("div",null,[s[40]||(s[40]=e("h2",{class:"text-lg font-semibold"},"Tus gastos",-1)),e("p",sn,"Total: "+n($(W.value.expenses)),1)]),e("button",{type:"button",class:"btn-secondary",onClick:ce},"+ Nuevo gasto")]),N(De,{expenses:t.event.expenses||[],"can-delete":!1,onDelete:ke},null,8,["expenses"])])])):(o(),l("div",an,[Y.value?(o(),l("div",{key:0,class:U(["rounded-lg p-4 text-sm",Y.value.className])},[e("p",nn,n(Y.value.title),1),e("p",on,n(Y.value.message),1)],2)):c("",!0),e("div",ln,[d.value?(o(),l("button",{key:0,type:"button",class:U(["tab-btn",a.value==="resumen"?"tab-btn--active":"tab-btn--idle"]),onClick:s[0]||(s[0]=y=>a.value="resumen")}," Resumen ",2)):c("",!0),e("button",{type:"button",class:U(["tab-btn",a.value==="pagos"?"tab-btn--active":"tab-btn--idle"]),onClick:s[1]||(s[1]=y=>a.value="pagos")}," Pagos ",2),e("button",{type:"button",class:U(["tab-btn",a.value==="gastos"?"tab-btn--active":"tab-btn--idle"]),onClick:s[2]||(s[2]=y=>a.value="gastos")}," Gastos ",2),d.value?(o(),l("button",{key:1,type:"button",class:U(["tab-btn",a.value==="gastos-personales"?"tab-btn--active":"tab-btn--idle"]),onClick:s[3]||(s[3]=y=>a.value="gastos-personales")}," Gastos personales ",2)):c("",!0),d.value?(o(),l("button",{key:2,type:"button",class:U(["tab-btn",a.value==="analisis"?"tab-btn--active":"tab-btn--idle"]),onClick:s[4]||(s[4]=y=>a.value="analisis")}," Análisis ",2)):c("",!0),s[41]||(s[41]=e("div",{class:"flex-1"},null,-1)),e("div",{class:"flex gap-2"},[e("button",{type:"button",class:"btn-primary",onClick:ue},"+ Nuevo pago"),e("button",{type:"button",class:"btn-secondary",onClick:ce},"+ Nuevo gasto")])]),d.value&&a.value==="resumen"?(o(),l("div",rn,[e("div",dn,[e("div",un,[s[42]||(s[42]=e("div",null,[e("h2",{class:"text-lg font-semibold"},"Estado y fechas"),e("p",{class:"text-sm text-gray-400"},"Actualiza el estado del evento y fechas clave.")],-1)),e("span",{class:U(["px-3 py-1 rounded-full text-xs font-semibold border",Q.value.className])},n(Q.value.label),3)]),e("form",{onSubmit:te(Te,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},[e("div",null,[s[49]||(s[49]=e("label",{class:"text-gray-300 text-sm"},"Estado",-1)),g(e("select",{"onUpdate:modelValue":s[5]||(s[5]=y=>x(S).status=y),class:"input"},[s[43]||(s[43]=e("option",{value:""},"Selecciona un estado",-1)),s[44]||(s[44]=e("option",{value:"cotizado"},"Cotizado",-1)),s[45]||(s[45]=e("option",{value:"reservado"},"Reservado",-1)),s[46]||(s[46]=e("option",{value:"confirmado"},"Confirmado",-1)),s[47]||(s[47]=e("option",{value:"pospuesto"},"Pospuesto",-1)),e("option",{value:"pagado",disabled:!V.value},"Pagado",8,cn),s[48]||(s[48]=e("option",{value:"cancelado"},"Cancelado",-1))],512),[[se,x(S).status]]),x(S).errors.status?(o(),l("p",mn,n(x(S).errors.status),1)):K.value==="pagado"&&de.value?(o(),l("p",pn,n(de.value),1)):c("",!0)]),e("div",null,[s[50]||(s[50]=e("label",{class:"text-gray-300 text-sm"},"Fecha del evento",-1)),g(e("input",{"onUpdate:modelValue":s[6]||(s[6]=y=>x(S).event_date=y),type:"date",class:"input"},null,512),[[b,x(S).event_date]]),x(S).errors.event_date?(o(),l("p",xn,n(x(S).errors.event_date),1)):c("",!0)]),e("div",null,[s[51]||(s[51]=e("label",{class:"text-gray-300 text-sm"},"Fecha pago final",-1)),g(e("input",{"onUpdate:modelValue":s[7]||(s[7]=y=>x(S).full_payment_due_date=y),type:"date",class:"input"},null,512),[[b,x(S).full_payment_due_date]]),x(S).errors.full_payment_due_date?(o(),l("p",yn,n(x(S).errors.full_payment_due_date),1)):c("",!0)]),e("div",vn,[e("button",{type:"submit",class:"btn-primary",disabled:x(S).processing||!Be.value}," Guardar cambios ",8,gn)])],32)]),e("div",bn,[e("div",fn,[s[52]||(s[52]=e("div",null,[e("h2",{class:"text-lg font-semibold"},"Estado de pago"),e("p",{class:"text-sm text-gray-400"}," Automático según el total pagado vs el fee negociado. ")],-1)),e("span",{class:U(["px-3 py-1 rounded-full text-xs font-semibold border",J.value.className])},n(J.value.label),3)]),e("div",wn,[e("div",hn,[s[53]||(s[53]=e("p",{class:"text-gray-400"},"Diferencia vs fee",-1)),e("p",{class:U(["text-lg font-semibold",V.value?"text-green-300":"text-yellow-300"])},n(V.value?ge(ie.value):ge(-ye.value)),3),s[54]||(s[54]=e("p",{class:"text-gray-500 text-xs mt-1"}," Se calcula con el fee negociado y el total pagado. ",-1))]),e("div",kn,[s[55]||(s[55]=e("p",{class:"text-gray-400"},"Nota",-1)),e("p",$n,n(de.value),1)])])]),e("div",_n,[s[64]||(s[64]=e("div",{class:"flex items-center justify-between mb-4"},[e("div",null,[e("h2",{class:"text-lg font-semibold"},"Datos del evento"),e("p",{class:"text-sm text-gray-400"},"Información general y condiciones del show.")])],-1)),e("div",Sn,[e("div",Dn,[s[56]||(s[56]=e("p",{class:"text-gray-400"},"Ubicación",-1)),e("p",Un,[t.event.city||t.event.country?(o(),l("span",Cn,n(t.event.city)+n(t.event.city&&t.event.country?",":"")+" "+n(t.event.country),1)):(o(),l("span",En,n(t.event.location||"—"),1))]),t.event.location?(o(),l("p",Nn,n(t.event.location),1)):c("",!0),t.event.venue_address?(o(),l("p",Mn,n(t.event.venue_address),1)):c("",!0)]),e("div",Pn,[s[57]||(s[57]=e("p",{class:"text-gray-400"},"Tipo de evento",-1)),e("p",jn,n(t.event.event_type||"—"),1)]),e("div",On,[s[58]||(s[58]=e("p",{class:"text-gray-400"},"Fee del show",-1)),e("p",An,[e("span",null,n(t.event.currency||"USD"),1),e("span",Vn,n(x(Z)(t.event.show_fee_total??0)),1)]),s[59]||(s[59]=e("p",{class:"text-gray-400 mt-2"},"Moneda",-1)),e("p",Fn,n(t.event.currency||"USD"),1)]),e("div",Tn,[s[60]||(s[60]=e("p",{class:"text-gray-400"},"% Anticipo",-1)),e("p",zn,n(t.event.advance_percentage??50)+"%",1),s[61]||(s[61]=e("p",{class:"text-gray-400 mt-2"},"¿Se espera anticipo?",-1)),e("p",Bn,n(t.event.advance_expected?"Sí":"No"),1)]),e("div",In,[s[62]||(s[62]=e("p",{class:"text-gray-400"},"Fecha pago final",-1)),e("p",Rn,n(t.event.full_payment_due_date?x(j)(t.event.full_payment_due_date):"—"),1)]),e("div",Gn,[s[63]||(s[63]=e("p",{class:"text-gray-400"},"Fecha del evento",-1)),e("p",qn,n(t.event.event_date?x(j)(t.event.event_date):"—"),1)])])]),le.value.length?(o(),l("div",Ln,[s[66]||(s[66]=e("h2",{class:"text-lg font-semibold mb-4"},"Confirmacion road managers",-1)),e("div",Xn,[(o(!0),l(T,null,z(le.value,y=>{var P;return o(),l("div",{key:y.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 border-b border-[#2a2a2a] pb-2"},[e("div",null,[e("p",Hn,n(y.name),1),e("p",Wn,n(y.email),1)]),e("div",Jn,[(P=y.pivot)!=null&&P.payment_confirmed_at?(o(),l("span",Kn,[s[65]||(s[65]=F(" Confirmado ",-1)),e("span",Qn,n(x(j)(y.pivot.payment_confirmed_at)),1)])):(o(),l("span",Yn,"Pendiente"))])])}),128))])])):c("",!0)])):a.value==="pagos"?(o(),l("div",Zn,[e("div",eo,[e("div",null,[s[67]||(s[67]=e("h2",{class:"text-lg font-semibold"},"Pagos",-1)),e("p",to,"Total: "+n($(E.value.paid)),1)]),e("button",{type:"button",class:"btn-primary",onClick:ue},"+ Nuevo pago")]),N(Se,{payments:t.event.payments||[],"can-delete":d.value,onDelete:he},null,8,["payments","can-delete"])])):a.value==="gastos"?(o(),l("div",so,[e("div",ao,[e("div",null,[s[68]||(s[68]=e("h2",{class:"text-lg font-semibold"},"Gastos",-1)),e("p",no,"Total: "+n($(E.value.expenses)),1)]),e("button",{type:"button",class:"btn-secondary",onClick:ce},"+ Nuevo gasto")]),N(De,{expenses:t.event.expenses||[],"can-delete":d.value,onDelete:ke},null,8,["expenses","can-delete"])])):d.value&&a.value==="gastos-personales"?(o(),l("div",oo,[e("div",lo,[e("div",null,[s[69]||(s[69]=e("h2",{class:"text-lg font-semibold"},"Gastos personales",-1)),e("p",ro," Total: "+n($(H.value)),1),e("p",io," 70% disponible: "+n($(A.value))+" · 70% luego de gastos: "+n($(xe.value)),1)]),e("button",{type:"button",class:"btn-secondary",disabled:A.value<=0,onClick:Ie}," + Agregar gasto personal ",8,uo)]),A.value<=0?(o(),l("div",co,[...s[70]||(s[70]=[e("p",{class:"text-amber-200 text-sm font-semibold"}," No puedes agregar más gastos personales porque el 70% del artista ya está en 0. ",-1)])])):c("",!0),N(Ws,{expenses:Ee.value,"can-edit":d.value,"can-delete":d.value,onEdit:Re,onDelete:Fe},null,8,["expenses","can-edit","can-delete"])])):d.value?(o(),l("div",mo,[N(Je,{totals:E.value,events:je.value,currency:"$"},null,8,["totals","events"])])):c("",!0)])),N(ut,{show:i.value,form:x(h),"payment-method-options":Ue,"normalize-currency":be,onClose:s[8]||(s[8]=y=>i.value=!1),onSubmit:Oe},null,8,["show","form"]),N(Dt,{show:L.value,form:x(k),"normalize-currency":fe,onClose:s[9]||(s[9]=y=>L.value=!1),onSubmit:Ae},null,8,["show","form"]),N(Xt,{show:O.value,form:x(p),"payment-method-options":Ce,"normalize-currency":we,remaining:Pe.value,"is-editing":!!C.value,onClose:Ge,onSubmit:Ve},null,8,["show","form","remaining","is-editing"])])]}),_:1}))}},ko=ae(po,[["__scopeId","data-v-820e1b4a"]]);export{ko as default};
