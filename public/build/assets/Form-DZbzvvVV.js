import{u as V,y as S,e as r,a as t,j as n,f as c,v as d,g as a,t as p,k as v,z as f,q as _,F as y,i as x,l as k,o as u}from"./app-UEwjYTSG.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const F={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},P={key:0,class:"text-red-500 text-sm mt-1"},w={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},D={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},A={key:0,class:"text-red-500 text-sm mt-1"},M={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},E={class:"mt-3 flex items-center gap-2"},z=["value"],j=["value"],q=["value"],N={class:"flex justify-end"},B={type:"submit",class:"btn-primary"},T={__name:"Form",props:{event:{type:Object,default:()=>({})},artists:{type:Array,default:()=>[]},roadManagers:{type:Array,default:()=>[]},mode:{type:String,default:"create"}},setup(m){const s=m,o=V({title:s.event.title||"",description:s.event.description||"",location:s.event.location||"",event_date:s.event.event_date||"",event_type:s.event.event_type||"",country:s.event.country||"",city:s.event.city||"",venue_address:s.event.venue_address||"",show_fee_total:s.event.show_fee_total||"",currency:s.event.currency||"USD",advance_percentage:s.event.advance_percentage||50,advance_expected:s.event.advance_expected??!0,full_payment_due_date:s.event.full_payment_due_date||"",status:s.event.status||"",artist_ids:s.event.artists?s.event.artists.map(i=>i.id):[],main_artist_id:s.event.main_artist_id||null,road_manager_ids:s.event.road_managers?s.event.road_managers.map(i=>i.id):[],poster_file:null});S(()=>o.artist_ids,i=>{if(Array.isArray(i)&&i.length===1){o.main_artist_id=i[0];return}i!=null&&i.includes(o.main_artist_id)||(o.main_artist_id=null)},{deep:!0});const b=()=>{console.log("ðŸŽ¤ Enviando formulario de evento...",o.data());const i="post",e=s.mode==="edit"?route("admin.events.update",s.event.id):route("admin.events.store");o.transform(l=>{var g;return{...l,_method:s.mode==="edit"?"put":"post",_token:(g=document.querySelector('meta[name="csrf-token"]'))==null?void 0:g.content}}).submit(i,e,{forceFormData:!0,onStart:()=>console.log("ðŸš€ Enviando request a:",e),onProgress:l=>console.log("ðŸ“¤ Subiendo...",l),onError:l=>{console.group("âŒ Errores de validaciÃ³n");for(const[g,U]of Object.entries(l))console.log(`${g}:`,U);console.groupEnd()},onSuccess:()=>console.log("âœ… Evento guardado correctamente"),onFinish:()=>console.log("ðŸ Proceso finalizado")})};return(i,e)=>(u(),r("form",{onSubmit:k(b,["prevent"]),class:"space-y-6"},[t("div",F,[t("div",null,[e[18]||(e[18]=t("label",{class:"text-gray-300 text-sm"},"TÃ­tulo del evento",-1)),n(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>a(o).title=l),type:"text",class:"input",placeholder:"Nombre del evento"},null,512),[[d,a(o).title]]),a(o).errors.title?(u(),r("p",P,p(a(o).errors.title),1)):c("",!0)]),t("div",null,[e[19]||(e[19]=t("label",{class:"text-gray-300 text-sm"},"Fecha del evento",-1)),n(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>a(o).event_date=l),type:"date",class:"input"},null,512),[[d,a(o).event_date]])])]),t("div",null,[e[20]||(e[20]=t("label",{class:"text-gray-300 text-sm"},"UbicaciÃ³n",-1)),n(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>a(o).location=l),type:"text",class:"input",placeholder:"Ciudad, paÃ­s o venue"},null,512),[[d,a(o).location]])]),t("div",w,[t("div",null,[e[21]||(e[21]=t("label",{class:"text-gray-300 text-sm"},"PaÃ­s",-1)),n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>a(o).country=l),type:"text",class:"input",placeholder:"PaÃ­s"},null,512),[[d,a(o).country]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"text-gray-300 text-sm"},"Ciudad",-1)),n(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>a(o).city=l),type:"text",class:"input",placeholder:"Ciudad"},null,512),[[d,a(o).city]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"text-gray-300 text-sm"},"DirecciÃ³n del venue",-1)),n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>a(o).venue_address=l),type:"text",class:"input",placeholder:"DirecciÃ³n"},null,512),[[d,a(o).venue_address]])])]),t("div",D,[t("div",null,[e[25]||(e[25]=t("label",{class:"text-gray-300 text-sm"},"Tipo de evento",-1)),n(t("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>a(o).event_type=l),class:"input"},[...e[24]||(e[24]=[f('<option value="" data-v-332c63d6>Selecciona un tipo</option><option value="masivo" data-v-332c63d6>Masivo</option><option value="publico" data-v-332c63d6>PÃºblico</option><option value="discoteca" data-v-332c63d6>Discoteca</option><option value="privado" data-v-332c63d6>Privado</option><option value="meet_and_greet" data-v-332c63d6>Meet &amp; Greet</option>',6)])],512),[[v,a(o).event_type]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"text-gray-300 text-sm"},"Estado",-1)),n(t("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>a(o).status=l),class:"input"},[...e[26]||(e[26]=[f('<option value="" data-v-332c63d6>Selecciona un estado</option><option value="cotizado" data-v-332c63d6>Cotizado</option><option value="reservado" data-v-332c63d6>Reservado</option><option value="confirmado" data-v-332c63d6>Confirmado</option><option value="pospuesto" data-v-332c63d6>Pospuesto</option><option value="pagado" data-v-332c63d6>Pagado</option><option value="cancelado" data-v-332c63d6>Cancelado</option>',7)])],512),[[v,a(o).status]]),e[28]||(e[28]=t("p",{class:"text-gray-500 text-xs mt-1"}," Pagado solo aplica cuando los pagos cubren el fee del show. ",-1))])]),t("div",null,[e[29]||(e[29]=t("label",{class:"text-gray-300 text-sm"},"DescripciÃ³n",-1)),n(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=l=>a(o).description=l),rows:"4",class:"input",placeholder:"Detalles del evento..."},null,512),[[d,a(o).description]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"text-gray-300 text-sm"},"PÃ³ster / Afiche",-1)),t("input",{type:"file",class:"input-file",onChange:e[9]||(e[9]=l=>{a(o).poster_file=l.target.files[0],console.log("ðŸ–¼ Archivo seleccionado:",l.target.files[0])})},null,32),a(o).errors.poster_file?(u(),r("p",A,p(a(o).errors.poster_file),1)):c("",!0)]),t("div",null,[e[36]||(e[36]=t("label",{class:"text-gray-300 text-sm"},"Finanzas del evento",-1)),t("div",M,[t("div",null,[e[31]||(e[31]=t("label",{class:"text-gray-300 text-sm"},"Fee total (show)",-1)),n(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>a(o).show_fee_total=l),type:"number",step:"0.01",class:"input",placeholder:"0.00"},null,512),[[d,a(o).show_fee_total]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"text-gray-300 text-sm"},"Moneda",-1)),n(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>a(o).currency=l),type:"text",class:"input",placeholder:"USD",maxlength:"3"},null,512),[[d,a(o).currency]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"text-gray-300 text-sm"},"% Anticipo",-1)),n(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>a(o).advance_percentage=l),type:"number",step:"0.01",class:"input",placeholder:"50"},null,512),[[d,a(o).advance_percentage]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"text-gray-300 text-sm"},"Fecha pago final",-1)),n(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>a(o).full_payment_due_date=l),type:"date",class:"input"},null,512),[[d,a(o).full_payment_due_date]])])]),t("div",E,[n(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>a(o).advance_expected=l),type:"checkbox",class:"checkbox"},null,512),[[_,a(o).advance_expected]]),e[35]||(e[35]=t("span",{class:"text-gray-300 text-sm"},"Â¿Se espera anticipo?",-1))])]),t("div",null,[e[37]||(e[37]=t("label",{class:"text-gray-300 text-sm"},"Lista de artistas",-1)),n(t("select",{"onUpdate:modelValue":e[15]||(e[15]=l=>a(o).artist_ids=l),multiple:"",class:"input"},[(u(!0),r(y,null,x(m.artists,l=>(u(),r("option",{key:l.id,value:l.id},p(l.name),9,z))),128))],512),[[v,a(o).artist_ids]]),e[38]||(e[38]=t("p",{class:"text-gray-500 text-xs mt-1"}," Puedes seleccionar varios artistas (Ctrl/Cmd + click) ",-1))]),t("div",null,[e[39]||(e[39]=t("label",{class:"text-gray-300 text-sm"},"Road managers asignados",-1)),n(t("select",{"onUpdate:modelValue":e[16]||(e[16]=l=>a(o).road_manager_ids=l),multiple:"",class:"input"},[(u(!0),r(y,null,x(m.roadManagers,l=>(u(),r("option",{key:l.id,value:l.id},p(l.name)+" ("+p(l.email)+") ",9,j))),128))],512),[[v,a(o).road_manager_ids]]),e[40]||(e[40]=t("p",{class:"text-gray-500 text-xs mt-1"}," Selecciona los road managers que podran ver y reportar finanzas de este evento. ",-1))]),t("div",null,[e[42]||(e[42]=t("label",{class:"text-gray-300 text-sm"},"Artista principal",-1)),n(t("select",{"onUpdate:modelValue":e[17]||(e[17]=l=>a(o).main_artist_id=l),class:"input"},[e[41]||(e[41]=t("option",{value:"",disabled:""},"Seleccione el artista principal",-1)),(u(!0),r(y,null,x(m.artists.filter(l=>a(o).artist_ids.includes(l.id)),l=>(u(),r("option",{key:l.id,value:l.id},p(l.name),9,q))),128))],512),[[v,a(o).main_artist_id]]),e[43]||(e[43]=t("p",{class:"text-gray-500 text-xs mt-1"}," selecciona el artista principal de la lista de invitados ",-1))]),t("div",N,[t("button",B,p(s.mode==="edit"?"Actualizar evento":"Guardar evento"),1)])],32))}},R=C(T,[["__scopeId","data-v-332c63d6"]]);export{R as default};
