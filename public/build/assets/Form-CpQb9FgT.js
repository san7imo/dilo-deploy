import{s as P,x as _,u as F,y as w,e as r,a as t,f as x,j as n,v as d,g as o,t as v,k as m,z as U,q as C,F as c,i as f,l as D,o as u}from"./app-BkiIwDrh.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const E={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},M={key:0,class:"text-red-500 text-sm mt-1"},z={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},N={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},j={key:0,class:"text-red-500 text-sm mt-1"},q={key:0},B={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},T={class:"mt-3 flex items-center gap-2"},G=["value"],L=["value"],O=["value"],R={class:"flex justify-end"},$={type:"submit",class:"btn-primary"},H={__name:"Form",props:{event:{type:Object,default:()=>({})},artists:{type:Array,default:()=>[]},roadManagers:{type:Array,default:()=>[]},mode:{type:String,default:"create"}},setup(g){const s=g,{props:V}=P(),S=_(()=>{var i,e;return((e=(i=V.auth)==null?void 0:i.user)==null?void 0:e.role_names)||[]}),b=_(()=>S.value.includes("admin")),a=F({title:s.event.title||"",description:s.event.description||"",location:s.event.location||"",event_date:s.event.event_date||"",event_type:s.event.event_type||"",country:s.event.country||"",city:s.event.city||"",venue_address:s.event.venue_address||"",show_fee_total:s.event.show_fee_total||"",currency:s.event.currency||"USD",advance_percentage:s.event.advance_percentage||50,advance_expected:s.event.advance_expected??!0,full_payment_due_date:s.event.full_payment_due_date||"",status:s.event.status||"",artist_ids:s.event.artists?s.event.artists.map(i=>i.id):[],main_artist_id:s.event.main_artist_id||null,road_manager_ids:s.event.road_managers?s.event.road_managers.map(i=>i.id):[],poster_file:null});w(()=>a.artist_ids,i=>{if(Array.isArray(i)&&i.length===1){a.main_artist_id=i[0];return}i!=null&&i.includes(a.main_artist_id)||(a.main_artist_id=null)},{deep:!0});const k=()=>{console.log("ðŸŽ¤ Enviando formulario de evento...",a.data());const i="post",e=s.mode==="edit"?route("admin.events.update",s.event.id):route("admin.events.store");a.transform(l=>{var y;const p={...l,_method:s.mode==="edit"?"put":"post",_token:(y=document.querySelector('meta[name="csrf-token"]'))==null?void 0:y.content};return b.value||(delete p.show_fee_total,delete p.currency,delete p.advance_percentage,delete p.advance_expected,delete p.full_payment_due_date),p}).submit(i,e,{forceFormData:!0,onStart:()=>console.log("ðŸš€ Enviando request a:",e),onProgress:l=>console.log("ðŸ“¤ Subiendo...",l),onError:l=>{console.group("âŒ Errores de validaciÃ³n");for(const[p,y]of Object.entries(l))console.log(`${p}:`,y);console.groupEnd()},onSuccess:()=>console.log("âœ… Evento guardado correctamente"),onFinish:()=>console.log("ðŸ Proceso finalizado")})};return(i,e)=>(u(),r("form",{onSubmit:D(k,["prevent"]),class:"space-y-6"},[t("div",E,[t("div",null,[e[18]||(e[18]=t("label",{class:"text-gray-300 text-sm"},"TÃ­tulo del evento",-1)),n(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>o(a).title=l),type:"text",class:"input",placeholder:"Nombre del evento"},null,512),[[d,o(a).title]]),o(a).errors.title?(u(),r("p",M,v(o(a).errors.title),1)):x("",!0)]),t("div",null,[e[19]||(e[19]=t("label",{class:"text-gray-300 text-sm"},"Fecha del evento",-1)),n(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>o(a).event_date=l),type:"date",class:"input"},null,512),[[d,o(a).event_date]])])]),t("div",null,[e[20]||(e[20]=t("label",{class:"text-gray-300 text-sm"},"UbicaciÃ³n",-1)),n(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o(a).location=l),type:"text",class:"input",placeholder:"Ciudad, paÃ­s o venue"},null,512),[[d,o(a).location]])]),t("div",z,[t("div",null,[e[21]||(e[21]=t("label",{class:"text-gray-300 text-sm"},"PaÃ­s",-1)),n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>o(a).country=l),type:"text",class:"input",placeholder:"PaÃ­s"},null,512),[[d,o(a).country]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"text-gray-300 text-sm"},"Ciudad",-1)),n(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>o(a).city=l),type:"text",class:"input",placeholder:"Ciudad"},null,512),[[d,o(a).city]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"text-gray-300 text-sm"},"DirecciÃ³n del venue",-1)),n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>o(a).venue_address=l),type:"text",class:"input",placeholder:"DirecciÃ³n"},null,512),[[d,o(a).venue_address]])])]),t("div",N,[t("div",null,[e[25]||(e[25]=t("label",{class:"text-gray-300 text-sm"},"Tipo de evento",-1)),n(t("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>o(a).event_type=l),class:"input"},[...e[24]||(e[24]=[U('<option value="" data-v-0d9649fe>Selecciona un tipo</option><option value="masivo" data-v-0d9649fe>Masivo</option><option value="publico" data-v-0d9649fe>PÃºblico</option><option value="discoteca" data-v-0d9649fe>Discoteca</option><option value="privado" data-v-0d9649fe>Privado</option><option value="meet_and_greet" data-v-0d9649fe>Meet &amp; Greet</option>',6)])],512),[[m,o(a).event_type]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"text-gray-300 text-sm"},"Estado",-1)),n(t("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>o(a).status=l),class:"input"},[...e[26]||(e[26]=[U('<option value="" data-v-0d9649fe>Selecciona un estado</option><option value="cotizado" data-v-0d9649fe>Cotizado</option><option value="reservado" data-v-0d9649fe>Reservado</option><option value="confirmado" data-v-0d9649fe>Confirmado</option><option value="pospuesto" data-v-0d9649fe>Pospuesto</option><option value="pagado" data-v-0d9649fe>Pagado</option><option value="cancelado" data-v-0d9649fe>Cancelado</option>',7)])],512),[[m,o(a).status]]),e[28]||(e[28]=t("p",{class:"text-gray-500 text-xs mt-1"}," Pagado solo aplica cuando los pagos cubren el fee del show. ",-1))])]),t("div",null,[e[29]||(e[29]=t("label",{class:"text-gray-300 text-sm"},"DescripciÃ³n",-1)),n(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=l=>o(a).description=l),rows:"4",class:"input",placeholder:"Detalles del evento..."},null,512),[[d,o(a).description]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"text-gray-300 text-sm"},"PÃ³ster / Afiche",-1)),t("input",{type:"file",class:"input-file",onChange:e[9]||(e[9]=l=>{o(a).poster_file=l.target.files[0],console.log("ðŸ–¼ Archivo seleccionado:",l.target.files[0])})},null,32),o(a).errors.poster_file?(u(),r("p",j,v(o(a).errors.poster_file),1)):x("",!0)]),b.value?(u(),r("div",q,[e[36]||(e[36]=t("label",{class:"text-gray-300 text-sm"},"Finanzas del evento",-1)),t("div",B,[t("div",null,[e[31]||(e[31]=t("label",{class:"text-gray-300 text-sm"},"Fee total (show)",-1)),n(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>o(a).show_fee_total=l),type:"number",step:"0.01",class:"input",placeholder:"0.00"},null,512),[[d,o(a).show_fee_total]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"text-gray-300 text-sm"},"Moneda",-1)),n(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>o(a).currency=l),type:"text",class:"input",placeholder:"USD",maxlength:"3"},null,512),[[d,o(a).currency]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"text-gray-300 text-sm"},"% Anticipo",-1)),n(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>o(a).advance_percentage=l),type:"number",step:"0.01",class:"input",placeholder:"50"},null,512),[[d,o(a).advance_percentage]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"text-gray-300 text-sm"},"Fecha pago final",-1)),n(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>o(a).full_payment_due_date=l),type:"date",class:"input"},null,512),[[d,o(a).full_payment_due_date]])])]),t("div",T,[n(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>o(a).advance_expected=l),type:"checkbox",class:"checkbox"},null,512),[[C,o(a).advance_expected]]),e[35]||(e[35]=t("span",{class:"text-gray-300 text-sm"},"Â¿Se espera anticipo?",-1))])])):x("",!0),t("div",null,[e[37]||(e[37]=t("label",{class:"text-gray-300 text-sm"},"Lista de artistas",-1)),n(t("select",{"onUpdate:modelValue":e[15]||(e[15]=l=>o(a).artist_ids=l),multiple:"",class:"input"},[(u(!0),r(c,null,f(g.artists,l=>(u(),r("option",{key:l.id,value:l.id},v(l.name),9,G))),128))],512),[[m,o(a).artist_ids]]),e[38]||(e[38]=t("p",{class:"text-gray-500 text-xs mt-1"}," Puedes seleccionar varios artistas (Ctrl/Cmd + click) ",-1))]),t("div",null,[e[39]||(e[39]=t("label",{class:"text-gray-300 text-sm"},"Road managers asignados",-1)),n(t("select",{"onUpdate:modelValue":e[16]||(e[16]=l=>o(a).road_manager_ids=l),multiple:"",class:"input"},[(u(!0),r(c,null,f(g.roadManagers,l=>(u(),r("option",{key:l.id,value:l.id},v(l.name)+" ("+v(l.email)+") ",9,L))),128))],512),[[m,o(a).road_manager_ids]]),e[40]||(e[40]=t("p",{class:"text-gray-500 text-xs mt-1"}," Selecciona los road managers que podran ver y reportar finanzas de este evento. ",-1))]),t("div",null,[e[42]||(e[42]=t("label",{class:"text-gray-300 text-sm"},"Artista principal",-1)),n(t("select",{"onUpdate:modelValue":e[17]||(e[17]=l=>o(a).main_artist_id=l),class:"input"},[e[41]||(e[41]=t("option",{value:"",disabled:""},"Seleccione el artista principal",-1)),(u(!0),r(c,null,f(g.artists.filter(l=>o(a).artist_ids.includes(l.id)),l=>(u(),r("option",{key:l.id,value:l.id},v(l.name),9,O))),128))],512),[[m,o(a).main_artist_id]]),e[43]||(e[43]=t("p",{class:"text-gray-500 text-xs mt-1"}," selecciona el artista principal de la lista de invitados ",-1))]),t("div",R,[t("button",$,v(s.mode==="edit"?"Actualizar evento":"Guardar evento"),1)])],32))}},W=A(H,[["__scopeId","data-v-0d9649fe"]]);export{W as default};
