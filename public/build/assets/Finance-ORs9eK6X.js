import{c as Z,o,w as q,a as e,l as ee,e as l,j as b,f as c,v as f,t as n,F as A,i as V,k as te,q as Re,g as v,n as D,s as Be,x as y,d as B,u as I,y as Ie,b as N,h as j,m as qe}from"./app-UEwjYTSG.js";import{A as Ge}from"./AdminLayout-CNeqSKlj.js";import{_ as Xe}from"./FinanceCharts-BPWD6Wqw.js";import{_ as ue}from"./Modal-2dALJX5L.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./responsive-blanco-DOkwJ8BK.js";const Le={class:"p-6 space-y-5 text-white"},Ke={class:"flex items-center justify-between gap-4"},He={key:0,class:"text-red-500 text-sm mt-1"},Je={key:0,class:"text-red-500 text-sm mt-1"},Qe={key:0},We={key:1},Ye=["value"],Ze={key:0,class:"text-red-500 text-sm mt-1"},et={class:"flex items-center gap-2 mt-6"},tt={class:"sm:col-span-2"},st={key:0,class:"text-red-500 text-sm mt-1"},at={class:"sm:col-span-2 flex justify-end gap-2 mt-2"},nt=["disabled"],ot={__name:"PaymentModal",props:{show:{type:Boolean,default:!1},form:{type:Object,required:!0},paymentMethodOptions:{type:Array,default:()=>[]},normalizeCurrency:{type:Function,default:null}},emits:["close","submit"],setup(t,{emit:u}){const h=t,w=u,d=()=>{typeof h.normalizeCurrency=="function"&&h.normalizeCurrency()};return(m,a)=>(o(),Z(ue,{show:t.show,onClose:a[10]||(a[10]=i=>w("close"))},{default:q(()=>[e("div",Le,[e("div",Ke,[a[11]||(a[11]=e("div",null,[e("h2",{class:"text-lg font-semibold"},"Registrar pago"),e("p",{class:"text-sm text-gray-400"},"Registra un pago y se convertirá a USD según la tasa.")],-1)),e("button",{type:"button",class:"text-gray-300 hover:text-white",onClick:a[0]||(a[0]=i=>w("close"))}," Cerrar ")]),e("form",{onSubmit:a[9]||(a[9]=ee(i=>w("submit"),["prevent"])),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[e("div",null,[a[12]||(a[12]=e("label",{class:"text-gray-300 text-sm"},"Fecha",-1)),b(e("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>t.form.payment_date=i),type:"date",class:"fin-input"},null,512),[[f,t.form.payment_date]]),t.form.errors.payment_date?(o(),l("p",He,n(t.form.errors.payment_date),1)):c("",!0)]),e("div",null,[a[13]||(a[13]=e("label",{class:"text-gray-300 text-sm"},"Monto",-1)),b(e("input",{"onUpdate:modelValue":a[2]||(a[2]=i=>t.form.amount_original=i),type:"number",step:"0.01",class:"fin-input"},null,512),[[f,t.form.amount_original]]),t.form.errors.amount_original?(o(),l("p",Je,n(t.form.errors.amount_original),1)):c("",!0)]),e("div",null,[a[14]||(a[14]=e("label",{class:"text-gray-300 text-sm"},"Moneda (ISO)",-1)),b(e("input",{"onUpdate:modelValue":a[3]||(a[3]=i=>t.form.currency=i),onBlur:d,type:"text",class:"fin-input",placeholder:"USD / COP / MXN..."},null,544),[[f,t.form.currency]]),a[15]||(a[15]=e("p",{class:"text-gray-500 text-xs mt-1"},"Ej: USD, COP, MXN (3 letras).",-1))]),t.form.currency!=="USD"?(o(),l("div",Qe,[a[16]||(a[16]=e("label",{class:"text-gray-300 text-sm"},"Tasa a USD",-1)),b(e("input",{"onUpdate:modelValue":a[4]||(a[4]=i=>t.form.exchange_rate_to_base=i),type:"number",step:"0.000001",class:"fin-input"},null,512),[[f,t.form.exchange_rate_to_base]]),a[17]||(a[17]=e("p",{class:"text-gray-500 text-xs mt-1"},"Ej: si 1 COP = 0.00025 USD, pon 0.00025",-1))])):(o(),l("div",We,[...a[18]||(a[18]=[e("label",{class:"text-gray-300 text-sm"},"Tasa a USD",-1),e("input",{value:1,disabled:"",class:"fin-input opacity-60"},null,-1),e("p",{class:"text-gray-500 text-xs mt-1"},"USD no requiere tasa.",-1)])])),e("div",null,[a[20]||(a[20]=e("label",{class:"text-gray-300 text-sm"},"Método de pago",-1)),b(e("select",{"onUpdate:modelValue":a[5]||(a[5]=i=>t.form.payment_method=i),class:"fin-input"},[a[19]||(a[19]=e("option",{value:"",disabled:""},"Selecciona un método",-1)),(o(!0),l(A,null,V(t.paymentMethodOptions,i=>(o(),l("option",{key:i.value,value:i.value},n(i.label),9,Ye))),128))],512),[[te,t.form.payment_method]]),t.form.errors.payment_method?(o(),l("p",Ze,n(t.form.errors.payment_method),1)):c("",!0)]),e("div",et,[b(e("input",{"onUpdate:modelValue":a[6]||(a[6]=i=>t.form.is_advance=i),type:"checkbox",class:"fin-checkbox"},null,512),[[Re,t.form.is_advance]]),a[21]||(a[21]=e("span",{class:"text-gray-300 text-sm"},"¿Es anticipo?",-1))]),e("div",tt,[a[22]||(a[22]=e("label",{class:"text-gray-300 text-sm"},"Notas",-1)),b(e("textarea",{"onUpdate:modelValue":a[7]||(a[7]=i=>t.form.notes=i),rows:"3",class:"fin-input",placeholder:"Notas adicionales sobre este pago..."},null,512),[[f,t.form.notes]]),t.form.errors.notes?(o(),l("p",st,n(t.form.errors.notes),1)):c("",!0)]),e("div",at,[e("button",{type:"button",class:"fin-btn-ghost",onClick:a[8]||(a[8]=i=>w("close"))}," Cancelar "),e("button",{class:"fin-btn-primary",type:"submit",disabled:t.form.processing}," Guardar pago ",8,nt)])],32)])]),_:1},8,["show"]))}},lt=se(ot,[["__scopeId","data-v-4f82d78b"]]),rt={class:"p-6 space-y-5 text-white"},it={class:"flex items-center justify-between gap-4"},dt={key:0,class:"text-red-500 text-sm mt-1"},ut={key:0,class:"text-red-500 text-sm mt-1"},ct={key:0,class:"text-red-500 text-sm mt-1"},mt={key:0,class:"text-red-500 text-sm mt-1"},xt={key:0},pt={key:1},yt={class:"sm:col-span-2"},vt={key:0,class:"text-red-500 text-sm mt-1"},bt={class:"sm:col-span-2"},gt={key:0,class:"text-red-500 text-sm mt-1"},ft={class:"sm:col-span-2 flex justify-end gap-2 mt-2"},wt=["disabled"],ht={__name:"ExpenseModal",props:{show:{type:Boolean,default:!1},form:{type:Object,required:!0},normalizeCurrency:{type:Function,default:null}},emits:["close","submit"],setup(t,{emit:u}){const h=t,w=u,d=()=>{typeof h.normalizeCurrency=="function"&&h.normalizeCurrency()};return(m,a)=>(o(),Z(ue,{show:t.show,onClose:a[11]||(a[11]=i=>w("close"))},{default:q(()=>[e("div",rt,[e("div",it,[a[12]||(a[12]=e("div",null,[e("h2",{class:"text-lg font-semibold"},"Registrar gasto"),e("p",{class:"text-sm text-gray-400"},"Registra un gasto y se convertirá a USD según la tasa.")],-1)),e("button",{type:"button",class:"text-gray-300 hover:text-white",onClick:a[0]||(a[0]=i=>w("close"))}," Cerrar ")]),e("form",{onSubmit:a[10]||(a[10]=ee(i=>w("submit"),["prevent"])),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[e("div",null,[a[13]||(a[13]=e("label",{class:"text-gray-300 text-sm"},"Fecha",-1)),b(e("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>t.form.expense_date=i),type:"date",class:"fin-input"},null,512),[[f,t.form.expense_date]]),t.form.errors.expense_date?(o(),l("p",dt,n(t.form.errors.expense_date),1)):c("",!0)]),e("div",null,[a[14]||(a[14]=e("label",{class:"text-gray-300 text-sm"},"Nombre del gasto *",-1)),b(e("input",{"onUpdate:modelValue":a[2]||(a[2]=i=>t.form.name=i),type:"text",class:"fin-input",placeholder:"Ej: Vuelo, Hotel..."},null,512),[[f,t.form.name]]),t.form.errors.name?(o(),l("p",ut,n(t.form.errors.name),1)):c("",!0)]),e("div",null,[a[16]||(a[16]=e("label",{class:"text-gray-300 text-sm"},"Categoría",-1)),b(e("select",{"onUpdate:modelValue":a[3]||(a[3]=i=>t.form.category=i),class:"fin-input"},[...a[15]||(a[15]=[e("option",{value:""},"Selecciona una categoría",-1),e("option",{value:"transporte"},"Transporte",-1),e("option",{value:"hospedaje"},"Hospedaje",-1),e("option",{value:"alimentacion"},"Alimentación",-1),e("option",{value:"sonido"},"Sonido",-1),e("option",{value:"iluminacion"},"Iluminación",-1),e("option",{value:"seguridad"},"Seguridad",-1),e("option",{value:"marketing"},"Marketing",-1),e("option",{value:"fotografo"},"Fotógrafo",-1),e("option",{value:"filmmaker"},"Filmmaker",-1),e("option",{value:"visa"},"Visa",-1),e("option",{value:"ropa"},"Ropa",-1),e("option",{value:"impuestos"},"Impuestos",-1),e("option",{value:"otros"},"Otros",-1)])],512),[[te,t.form.category]]),t.form.errors.category?(o(),l("p",ct,n(t.form.errors.category),1)):c("",!0)]),e("div",null,[a[17]||(a[17]=e("label",{class:"text-gray-300 text-sm"},"Monto",-1)),b(e("input",{"onUpdate:modelValue":a[4]||(a[4]=i=>t.form.amount_original=i),type:"number",step:"0.01",class:"fin-input"},null,512),[[f,t.form.amount_original]]),t.form.errors.amount_original?(o(),l("p",mt,n(t.form.errors.amount_original),1)):c("",!0)]),e("div",null,[a[18]||(a[18]=e("label",{class:"text-gray-300 text-sm"},"Moneda (ISO)",-1)),b(e("input",{"onUpdate:modelValue":a[5]||(a[5]=i=>t.form.currency=i),onBlur:d,type:"text",class:"fin-input",placeholder:"USD / COP / MXN..."},null,544),[[f,t.form.currency]]),a[19]||(a[19]=e("p",{class:"text-gray-500 text-xs mt-1"},"Ej: USD, COP, MXN (3 letras).",-1))]),t.form.currency!=="USD"?(o(),l("div",xt,[a[20]||(a[20]=e("label",{class:"text-gray-300 text-sm"},"Tasa a USD",-1)),b(e("input",{"onUpdate:modelValue":a[6]||(a[6]=i=>t.form.exchange_rate_to_base=i),type:"number",step:"0.000001",class:"fin-input"},null,512),[[f,t.form.exchange_rate_to_base]]),a[21]||(a[21]=e("p",{class:"text-gray-500 text-xs mt-1"},"Ej: si 1 COP = 0.00025 USD, pon 0.00025",-1))])):(o(),l("div",pt,[...a[22]||(a[22]=[e("label",{class:"text-gray-300 text-sm"},"Tasa a USD",-1),e("input",{value:1,disabled:"",class:"fin-input opacity-60"},null,-1),e("p",{class:"text-gray-500 text-xs mt-1"},"USD no requiere tasa.",-1)])])),e("div",yt,[a[23]||(a[23]=e("label",{class:"text-gray-300 text-sm"},"Descripción",-1)),b(e("textarea",{"onUpdate:modelValue":a[7]||(a[7]=i=>t.form.description=i),rows:"3",class:"fin-input",placeholder:"Detalles adicionales del gasto..."},null,512),[[f,t.form.description]]),t.form.errors.description?(o(),l("p",vt,n(t.form.errors.description),1)):c("",!0)]),e("div",bt,[a[24]||(a[24]=e("label",{class:"text-gray-300 text-sm"},"Comprobante (imagen)",-1)),e("input",{type:"file",accept:"image/*",class:"fin-input",onChange:a[8]||(a[8]=i=>{t.form.receipt_file=i.target.files[0]})},null,32),t.form.errors.receipt_file?(o(),l("p",gt,n(t.form.errors.receipt_file),1)):c("",!0)]),e("div",ft,[e("button",{type:"button",class:"fin-btn-ghost",onClick:a[9]||(a[9]=i=>w("close"))}," Cancelar "),e("button",{class:"fin-btn-secondary",type:"submit",disabled:t.form.processing}," Guardar gasto ",8,wt)])],32)])]),_:1},8,["show"]))}},$t=se(ht,[["__scopeId","data-v-29b3f190"]]),kt={class:"p-6 space-y-5 text-white"},_t={class:"flex items-center justify-between gap-4"},St={class:"text-lg font-semibold"},Dt={key:0,class:"text-xs text-gray-500 mt-1"},Ct={key:1,class:"text-red-500 text-sm mt-2"},Ut={key:0,class:"text-red-500 text-sm mt-1"},Nt={key:0,class:"text-red-500 text-sm mt-1"},Et={key:0,class:"text-red-500 text-sm mt-1"},Ft=["value"],Mt={key:0,class:"text-red-500 text-sm mt-1"},Pt={key:0,class:"text-red-500 text-sm mt-1"},Ot={key:0,class:"text-red-500 text-sm mt-1"},Tt={key:0},jt={key:1},At={class:"sm:col-span-2"},Vt={key:0,class:"text-red-500 text-sm mt-1"},zt={class:"sm:col-span-2 flex justify-end gap-2 mt-2"},Rt=["disabled"],Bt={__name:"PersonalExpenseModal",props:{show:{type:Boolean,default:!1},form:{type:Object,required:!0},paymentMethodOptions:{type:Array,default:()=>[]},normalizeCurrency:{type:Function,default:null},remaining:{type:Number,default:null},isEditing:{type:Boolean,default:!1}},emits:["close","submit"],setup(t,{emit:u}){const h=t,w=u,d=()=>{typeof h.normalizeCurrency=="function"&&h.normalizeCurrency()};return(m,a)=>(o(),Z(ue,{show:t.show,onClose:a[12]||(a[12]=i=>w("close"))},{default:q(()=>[e("div",kt,[e("div",_t,[e("div",null,[e("h2",St,n(t.isEditing?"Editar gasto personal":"Registrar gasto personal"),1),a[13]||(a[13]=e("p",{class:"text-sm text-gray-400"}," Se descontará del 70% del artista. ",-1)),t.remaining!==null?(o(),l("p",Dt," Disponible: USD "+n(Number(t.remaining??0).toFixed(2)),1)):c("",!0),t.form.errors.base?(o(),l("p",Ct,n(t.form.errors.base),1)):c("",!0)]),e("button",{type:"button",class:"text-gray-300 hover:text-white",onClick:a[0]||(a[0]=i=>w("close"))}," Cerrar ")]),e("form",{onSubmit:a[11]||(a[11]=ee(i=>w("submit"),["prevent"])),class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[e("div",null,[a[14]||(a[14]=e("label",{class:"text-gray-300 text-sm"},"Fecha",-1)),b(e("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>t.form.expense_date=i),type:"date",class:"fin-input"},null,512),[[f,t.form.expense_date]]),t.form.errors.expense_date?(o(),l("p",Ut,n(t.form.errors.expense_date),1)):c("",!0)]),e("div",null,[a[15]||(a[15]=e("label",{class:"text-gray-300 text-sm"},"Tipo de gasto",-1)),b(e("input",{"onUpdate:modelValue":a[2]||(a[2]=i=>t.form.expense_type=i),type:"text",class:"fin-input",placeholder:"Ej: Viáticos"},null,512),[[f,t.form.expense_type]]),t.form.errors.expense_type?(o(),l("p",Nt,n(t.form.errors.expense_type),1)):c("",!0)]),e("div",null,[a[16]||(a[16]=e("label",{class:"text-gray-300 text-sm"},"Nombre del gasto *",-1)),b(e("input",{"onUpdate:modelValue":a[3]||(a[3]=i=>t.form.name=i),type:"text",class:"fin-input",placeholder:"Ej: Hotel"},null,512),[[f,t.form.name]]),t.form.errors.name?(o(),l("p",Et,n(t.form.errors.name),1)):c("",!0)]),e("div",null,[a[18]||(a[18]=e("label",{class:"text-gray-300 text-sm"},"Método del gasto *",-1)),b(e("select",{"onUpdate:modelValue":a[4]||(a[4]=i=>t.form.payment_method=i),class:"fin-input"},[a[17]||(a[17]=e("option",{value:"",disabled:""},"Selecciona un método",-1)),(o(!0),l(A,null,V(t.paymentMethodOptions,i=>(o(),l("option",{key:i.value,value:i.value},n(i.label),9,Ft))),128))],512),[[te,t.form.payment_method]]),t.form.errors.payment_method?(o(),l("p",Mt,n(t.form.errors.payment_method),1)):c("",!0)]),e("div",null,[a[19]||(a[19]=e("label",{class:"text-gray-300 text-sm"},"Destinatario",-1)),b(e("input",{"onUpdate:modelValue":a[5]||(a[5]=i=>t.form.recipient=i),type:"text",class:"fin-input",placeholder:"Ej: Nombre o contacto"},null,512),[[f,t.form.recipient]]),t.form.errors.recipient?(o(),l("p",Pt,n(t.form.errors.recipient),1)):c("",!0)]),e("div",null,[a[20]||(a[20]=e("label",{class:"text-gray-300 text-sm"},"Monto",-1)),b(e("input",{"onUpdate:modelValue":a[6]||(a[6]=i=>t.form.amount_original=i),type:"number",step:"0.01",class:"fin-input"},null,512),[[f,t.form.amount_original]]),t.form.errors.amount_original?(o(),l("p",Ot,n(t.form.errors.amount_original),1)):c("",!0)]),e("div",null,[a[21]||(a[21]=e("label",{class:"text-gray-300 text-sm"},"Moneda (ISO)",-1)),b(e("input",{"onUpdate:modelValue":a[7]||(a[7]=i=>t.form.currency=i),onBlur:d,type:"text",class:"fin-input",placeholder:"USD / COP / MXN..."},null,544),[[f,t.form.currency]]),a[22]||(a[22]=e("p",{class:"text-gray-500 text-xs mt-1"},"Ej: USD, COP, MXN (3 letras).",-1))]),t.form.currency!=="USD"?(o(),l("div",Tt,[a[23]||(a[23]=e("label",{class:"text-gray-300 text-sm"},"Tasa a USD",-1)),b(e("input",{"onUpdate:modelValue":a[8]||(a[8]=i=>t.form.exchange_rate_to_base=i),type:"number",step:"0.000001",class:"fin-input"},null,512),[[f,t.form.exchange_rate_to_base]]),a[24]||(a[24]=e("p",{class:"text-gray-500 text-xs mt-1"},"Ej: si 1 COP = 0.00025 USD, pon 0.00025",-1))])):(o(),l("div",jt,[...a[25]||(a[25]=[e("label",{class:"text-gray-300 text-sm"},"Tasa a USD",-1),e("input",{value:1,disabled:"",class:"fin-input opacity-60"},null,-1),e("p",{class:"text-gray-500 text-xs mt-1"},"USD no requiere tasa.",-1)])])),e("div",At,[a[26]||(a[26]=e("label",{class:"text-gray-300 text-sm"},"Descripción",-1)),b(e("textarea",{"onUpdate:modelValue":a[9]||(a[9]=i=>t.form.description=i),rows:"3",class:"fin-input",placeholder:"Detalles adicionales del gasto..."},null,512),[[f,t.form.description]]),t.form.errors.description?(o(),l("p",Vt,n(t.form.errors.description),1)):c("",!0)]),e("div",zt,[e("button",{type:"button",class:"fin-btn-ghost",onClick:a[10]||(a[10]=i=>w("close"))}," Cancelar "),e("button",{class:"fin-btn-secondary",type:"submit",disabled:t.form.processing},n(t.isEditing?"Guardar cambios":"Guardar gasto"),9,Rt)])],32)])]),_:1},8,["show"]))}},It=se(Bt,[["__scopeId","data-v-4afc1b20"]]),M=t=>{if(!t)return"—";const u=new Date(t);return Number.isNaN(u.getTime())?t:u.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})},qt={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},Gt={key:0,class:"text-gray-400"},Xt={key:1,class:"overflow-x-auto"},Lt={class:"min-w-full text-sm text-gray-300"},Kt={class:"text-xs uppercase text-gray-400"},Ht={key:0,class:"py-2 text-right"},Jt={class:"py-2 whitespace-nowrap"},Qt={class:"py-2 whitespace-nowrap"},Wt={class:"py-2 whitespace-nowrap"},Yt={class:"py-2 whitespace-nowrap capitalize"},Zt={class:"py-2 whitespace-nowrap"},es={class:"py-2 max-w-[280px]"},ts={class:"text-gray-300"},ss={key:0,class:"py-2 text-right whitespace-nowrap"},as=["onClick"],he={__name:"PaymentsTable",props:{payments:{type:Array,default:()=>[]},canDelete:{type:Boolean,default:!0}},emits:["delete"],setup(t,{emit:u}){const h=u;return(w,d)=>(o(),l("div",qt,[!t.payments||t.payments.length===0?(o(),l("div",Gt," No hay pagos todavía. ")):(o(),l("div",Xt,[e("table",Lt,[e("thead",Kt,[e("tr",null,[d[0]||(d[0]=e("th",{class:"py-2 text-left"},"Fecha",-1)),d[1]||(d[1]=e("th",{class:"py-2 text-left"},"Original",-1)),d[2]||(d[2]=e("th",{class:"py-2 text-left"},"USD",-1)),d[3]||(d[3]=e("th",{class:"py-2 text-left"},"Método",-1)),d[4]||(d[4]=e("th",{class:"py-2 text-left"},"Anticipo",-1)),d[5]||(d[5]=e("th",{class:"py-2 text-left"},"Notas",-1)),t.canDelete?(o(),l("th",Ht,"Acciones")):c("",!0)])]),e("tbody",null,[(o(!0),l(A,null,V(t.payments,m=>(o(),l("tr",{key:m.id,class:"border-t border-[#2a2a2a]"},[e("td",Jt,n(v(M)(m.payment_date)),1),e("td",Qt,n(m.currency)+" "+n(Number(m.amount_original??0).toFixed(2)),1),e("td",Wt," $ "+n(Number(m.amount_base??0).toFixed(2)),1),e("td",Yt,n(m.payment_method||"—"),1),e("td",Zt,[e("span",{class:D(["px-2 py-1 rounded text-xs",m.is_advance?"bg-[#ffa236]/15 text-[#ffa236] border border-[#ffa236]/30":"bg-[#2a2a2a] text-gray-300"])},n(m.is_advance?"Sí":"No"),3)]),e("td",es,[e("span",ts,n((m.notes||"").trim()||"—"),1)]),t.canDelete?(o(),l("td",ss,[e("button",{onClick:a=>h("delete",m.id),class:"text-red-400 hover:underline"}," Eliminar ",8,as)])):c("",!0)]))),128))])])]))]))}},ns={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},os={key:0,class:"text-gray-400"},ls={key:1,class:"overflow-x-auto"},rs={class:"min-w-full text-sm text-gray-300"},is={class:"text-xs uppercase text-gray-400"},ds={key:0,class:"py-2 text-right"},us={class:"py-2 whitespace-nowrap"},cs={class:"py-2 font-semibold whitespace-nowrap"},ms={class:"py-2 whitespace-nowrap"},xs={key:0,class:"bg-[#2a2a2a] text-gray-300 px-2 py-1 rounded text-xs capitalize"},ps={key:1,class:"text-gray-500"},ys={class:"py-2 whitespace-nowrap"},vs={class:"py-2 whitespace-nowrap"},bs={class:"py-2 max-w-[280px]"},gs={class:"text-gray-300"},fs={class:"py-2 whitespace-nowrap"},ws=["href"],hs={key:1,class:"text-gray-500"},$s={key:0,class:"py-2 text-right whitespace-nowrap"},ks=["onClick"],$e={__name:"ExpensesTable",props:{expenses:{type:Array,default:()=>[]},canDelete:{type:Boolean,default:!0}},emits:["delete"],setup(t,{emit:u}){const h=u;return(w,d)=>(o(),l("div",ns,[!t.expenses||t.expenses.length===0?(o(),l("div",os," No hay gastos registrados. ")):(o(),l("div",ls,[e("table",rs,[e("thead",is,[e("tr",null,[d[0]||(d[0]=e("th",{class:"py-2 text-left"},"Fecha",-1)),d[1]||(d[1]=e("th",{class:"py-2 text-left"},"Nombre",-1)),d[2]||(d[2]=e("th",{class:"py-2 text-left"},"Categoría",-1)),d[3]||(d[3]=e("th",{class:"py-2 text-left"},"Original",-1)),d[4]||(d[4]=e("th",{class:"py-2 text-left"},"USD",-1)),d[5]||(d[5]=e("th",{class:"py-2 text-left"},"Descripción",-1)),d[6]||(d[6]=e("th",{class:"py-2 text-left"},"Comprobante",-1)),t.canDelete?(o(),l("th",ds,"Acciones")):c("",!0)])]),e("tbody",null,[(o(!0),l(A,null,V(t.expenses,m=>(o(),l("tr",{key:m.id,class:"border-t border-[#2a2a2a]"},[e("td",us,n(v(M)(m.expense_date)),1),e("td",cs,n(m.name||"—"),1),e("td",ms,[m.category?(o(),l("span",xs,n(m.category),1)):(o(),l("span",ps,"—"))]),e("td",ys,n(m.currency)+" "+n(Number(m.amount_original??0).toFixed(2)),1),e("td",vs," $ "+n(Number(m.amount_base??0).toFixed(2)),1),e("td",bs,[e("span",gs,n((m.description||"").trim()||"—"),1)]),e("td",fs,[m.receipt_url?(o(),l("a",{key:0,href:m.receipt_url,target:"_blank",rel:"noopener",class:"text-[#ffa236] hover:underline"}," Ver ",8,ws)):(o(),l("span",hs,"—"))]),t.canDelete?(o(),l("td",$s,[e("button",{onClick:a=>h("delete",m.id),class:"text-red-400 hover:underline"}," Eliminar ",8,ks)])):c("",!0)]))),128))])])]))]))}},_s={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},Ss={key:0,class:"text-gray-400"},Ds={key:1,class:"overflow-x-auto"},Cs={class:"min-w-full text-sm text-gray-300"},Us={class:"text-xs uppercase text-gray-400"},Ns={key:0,class:"py-2 text-right"},Es={class:"py-2 whitespace-nowrap"},Fs={class:"py-2 whitespace-nowrap"},Ms={key:0,class:"bg-[#2a2a2a] text-gray-300 px-2 py-1 rounded text-xs capitalize"},Ps={key:1,class:"text-gray-500"},Os={class:"py-2 font-semibold whitespace-nowrap"},Ts={class:"py-2 whitespace-nowrap"},js={class:"py-2 whitespace-nowrap"},As={class:"py-2 whitespace-nowrap"},Vs={class:"py-2 whitespace-nowrap"},zs={class:"py-2 max-w-[280px]"},Rs={class:"text-gray-300"},Bs={key:0,class:"py-2 text-right whitespace-nowrap"},Is=["onClick"],qs=["onClick"],Gs={__name:"PersonalExpensesTable",props:{expenses:{type:Array,default:()=>[]},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1}},emits:["edit","delete"],setup(t,{emit:u}){const h=u;return(w,d)=>(o(),l("div",_s,[!t.expenses||t.expenses.length===0?(o(),l("div",Ss," No hay gastos personales registrados. ")):(o(),l("div",Ds,[e("table",Cs,[e("thead",Us,[e("tr",null,[d[0]||(d[0]=e("th",{class:"py-2 text-left"},"Fecha",-1)),d[1]||(d[1]=e("th",{class:"py-2 text-left"},"Tipo",-1)),d[2]||(d[2]=e("th",{class:"py-2 text-left"},"Nombre",-1)),d[3]||(d[3]=e("th",{class:"py-2 text-left"},"Método",-1)),d[4]||(d[4]=e("th",{class:"py-2 text-left"},"Destinatario",-1)),d[5]||(d[5]=e("th",{class:"py-2 text-left"},"Original",-1)),d[6]||(d[6]=e("th",{class:"py-2 text-left"},"USD",-1)),d[7]||(d[7]=e("th",{class:"py-2 text-left"},"Descripción",-1)),t.canEdit||t.canDelete?(o(),l("th",Ns,"Acciones")):c("",!0)])]),e("tbody",null,[(o(!0),l(A,null,V(t.expenses,m=>(o(),l("tr",{key:m.id,class:"border-t border-[#2a2a2a]"},[e("td",Es,n(v(M)(m.expense_date)),1),e("td",Fs,[m.expense_type?(o(),l("span",Ms,n(m.expense_type),1)):(o(),l("span",Ps,"—"))]),e("td",Os,n(m.name||"—"),1),e("td",Ts,n(m.payment_method||"—"),1),e("td",js,n(m.recipient||"—"),1),e("td",As,n(m.currency)+" "+n(Number(m.amount_original??0).toFixed(2)),1),e("td",Vs," $ "+n(Number(m.amount_base??0).toFixed(2)),1),e("td",zs,[e("span",Rs,n((m.description||"").trim()||"—"),1)]),t.canEdit||t.canDelete?(o(),l("td",Bs,[t.canEdit?(o(),l("button",{key:0,onClick:a=>h("edit",m),class:"text-[#ffa236] hover:underline mr-3"}," Editar ",8,Is)):c("",!0),t.canDelete?(o(),l("button",{key:1,onClick:a=>h("delete",m.id),class:"text-red-400 hover:underline"}," Eliminar ",8,qs)):c("",!0)])):c("",!0)]))),128))])])]))]))}},Xs={class:"space-y-6 text-white"},Ls={class:"flex items-center justify-between gap-4"},Ks={class:"flex flex-wrap items-center gap-3"},Hs={class:"text-2xl font-bold"},Js={class:"text-gray-400 text-sm mt-2 space-y-1"},Qs={class:"text-white"},Ws={class:"text-white"},Ys={key:0},Zs={key:0,class:"block text-gray-400 text-xs"},ea={key:1,class:"block text-gray-500 text-xs"},ta={key:1},sa={class:"text-white"},aa={key:0,class:"block text-gray-500 text-xs"},na={class:"flex items-center gap-3"},oa={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},la={class:"card"},ra={class:"text-white text-xl font-semibold"},ia={class:"card"},da={class:"text-white text-xl font-semibold"},ua={class:"card"},ca={class:"text-red-400 text-xl font-semibold"},ma={class:"card"},xa={class:"text-white text-xl font-semibold"},pa={class:"card"},ya={class:"text-white text-xl font-semibold"},va={class:"card"},ba={class:"text-[#ffa236] text-xl font-semibold"},ga={class:"card"},fa={class:"text-red-400 text-xl font-semibold"},wa={class:"card"},ha={class:"text-[#ffa236] text-xl font-semibold"},$a={key:1,class:"space-y-6"},ka={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},_a={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Sa={class:"text-2xl font-semibold text-[#ffa236] mt-2"},Da={class:"text-sm text-gray-300"},Ca=["disabled"],Ua={key:1,class:"text-green-400 font-semibold"},Na={key:0,class:"block text-xs text-gray-400 mt-1"},Ea={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},Fa={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},Ma={class:"mini-card"},Pa={class:"text-white font-semibold"},Oa={key:0},Ta={key:1},ja={key:0,class:"text-gray-400 text-xs mt-1"},Aa={key:1,class:"text-gray-500 text-xs mt-1"},Va={class:"mini-card"},za={class:"text-white font-semibold capitalize"},Ra={class:"mini-card"},Ba={class:"text-white font-semibold"},Ia={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},qa={class:"card"},Ga={class:"text-white text-xl font-semibold"},Xa={class:"card"},La={class:"text-red-400 text-xl font-semibold"},Ka={class:"space-y-4"},Ha={class:"flex flex-wrap items-center justify-between gap-3 bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-5"},Ja={class:"text-sm text-gray-400"},Qa={class:"space-y-4"},Wa={class:"flex flex-wrap items-center justify-between gap-3 bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-5"},Ya={class:"text-sm text-gray-400"},Za={key:2},en={class:"font-semibold"},tn={class:"opacity-90 mt-1"},sn={class:"flex flex-wrap gap-2 border-b border-[#2a2a2a] pb-3"},an={key:1,class:"space-y-6"},nn={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},on={class:"flex items-center justify-between mb-4"},ln=["disabled"],rn={key:0,class:"text-red-500 text-sm mt-1"},dn={key:1,class:"text-amber-300 text-xs mt-1"},un={key:0,class:"text-red-500 text-sm mt-1"},cn={key:0,class:"text-red-500 text-sm mt-1"},mn={class:"sm:col-span-3 flex justify-end"},xn=["disabled"],pn={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},yn={class:"flex items-center justify-between mb-3"},vn={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm"},bn={class:"mini-card"},gn={class:"mini-card"},fn={class:"text-gray-300 text-sm mt-1"},wn={class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},hn={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},$n={class:"mini-card"},kn={class:"text-white font-semibold"},_n={key:0},Sn={key:1},Dn={key:0,class:"text-gray-400 text-xs mt-1"},Cn={key:1,class:"text-gray-500 text-xs mt-1"},Un={class:"mini-card"},Nn={class:"text-white font-semibold capitalize"},En={class:"mini-card"},Fn={class:"text-white font-semibold"},Mn={class:"ml-1"},Pn={class:"text-white font-semibold"},On={class:"mini-card"},Tn={class:"text-white font-semibold"},jn={class:"text-white font-semibold"},An={class:"mini-card"},Vn={class:"text-white font-semibold"},zn={class:"mini-card"},Rn={class:"text-white font-semibold"},Bn={key:0,class:"bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-6"},In={class:"space-y-3 text-sm"},qn={class:"text-white font-semibold"},Gn={class:"text-gray-400 text-xs"},Xn={class:"text-sm"},Ln={key:0,class:"text-green-400 font-semibold"},Kn={class:"block text-xs text-gray-400"},Hn={key:1,class:"text-yellow-400 font-semibold"},Jn={key:2,class:"space-y-4"},Qn={class:"flex flex-wrap items-center justify-between gap-3 bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-5"},Wn={class:"text-sm text-gray-400"},Yn={key:3,class:"space-y-4"},Zn={class:"flex flex-wrap items-center justify-between gap-3 bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-5"},eo={class:"text-sm text-gray-400"},to={key:4,class:"space-y-4"},so={class:"flex flex-wrap items-center justify-between gap-3 bg-[#1d1d1b] border border-[#2a2a2a] rounded-lg p-5"},ao={class:"text-sm text-gray-400"},no={class:"text-xs text-gray-500 mt-1"},oo=["disabled"],lo={key:0,class:"rounded-lg border border-amber-500/40 bg-amber-500/10 p-4"},ro={key:5,class:"space-y-6"},io={__name:"Finance",props:{event:{type:Object,required:!0},finance:{type:Object,default:()=>({})}},setup(t){const u=t,{props:h}=Be(),w=y(()=>{var r,s;return((s=(r=h.auth)==null?void 0:r.user)==null?void 0:s.role_names)||[]}),d=y(()=>w.value.includes("admin")),m=y(()=>w.value.includes("roadmanager")),a=B("resumen"),i=B(!1),G=B(!1),P=B(!1),ke=[{value:"transferencia",label:"Transferencia bancaria"},{value:"efectivo",label:"Efectivo"},{value:"tarjeta",label:"Tarjeta"},{value:"paypal",label:"PayPal"},{value:"otro",label:"Otro"}],z=()=>{var r;return((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""},ae=z(),_e=[{value:"transferencia",label:"Transferencia bancaria"},{value:"efectivo",label:"Efectivo"},{value:"tercero",label:"Enviado a otra persona"},{value:"otro",label:"Otro"}],ce=r=>{if(!r)return"";const s=String(r);return s.includes("T")?s.split("T")[0]:s.includes(" ")?s.split(" ")[0]:s},$=I({payment_date:new Date().toISOString().slice(0,10),amount_original:"",currency:"USD",exchange_rate_to_base:1,payment_method:"",is_advance:!1,notes:""}),k=I({expense_date:new Date().toISOString().slice(0,10),name:"",description:"",category:"",receipt_file:null,amount_original:"",currency:"USD",exchange_rate_to_base:1}),x=I({_token:ae,expense_date:new Date().toISOString().slice(0,10),expense_type:"",name:"",description:"",payment_method:"",recipient:"",amount_original:"",currency:"USD",exchange_rate_to_base:1}),_=I({_token:ae,status:u.event.status||"",event_date:ce(u.event.event_date),full_payment_due_date:ce(u.event.full_payment_due_date)}),X=I({_token:ae,confirmed:!0}),ne=y(()=>u.event.road_managers||u.event.roadManagers||[]),Se=y(()=>u.event.personal_expenses||u.event.personalExpenses||[]),C=B(null),De=y(()=>{var s,g;if(!m.value)return null;const r=(g=(s=h.auth)==null?void 0:s.user)==null?void 0:g.id;return ne.value.find(S=>S.id===r)||null}),L=y(()=>{var r,s;return((s=(r=De.value)==null?void 0:r.pivot)==null?void 0:s.payment_confirmed_at)||null}),Ce=y(()=>{const r=Number(u.event.show_fee_total??0),s=Number(u.event.advance_percentage??0),g=Number.isFinite(s)?s:0,S=Math.min(Math.max(g,0),100),p=r*(1-S/100);return Number.isFinite(p)?p:0});Ie(d,r=>{r||(a.value="pagos")},{immediate:!0});const U=y(()=>{var S,p,F,R;const r=Number(((S=u.finance)==null?void 0:S.total_paid_base)??0),s=Number(((p=u.finance)==null?void 0:p.total_expenses_base)??0),g=r-s;return{paid:r,expenses:s,net:g,shareLabel:Number(((F=u.finance)==null?void 0:F.share_label)??g*.3),shareArtist:Number(((R=u.finance)==null?void 0:R.share_artist)??g*.7)}}),K=y(()=>{var r;return Number(((r=u.finance)==null?void 0:r.total_personal_expenses_base)??0)}),me=y(()=>{var r,s;return typeof((r=u.finance)==null?void 0:r.share_artist_after_personal)<"u"?Number(((s=u.finance)==null?void 0:s.share_artist_after_personal)??0):Math.max(U.value.shareArtist-K.value,0)}),O=y(()=>Math.max(U.value.shareArtist-K.value,0)),Ue=y(()=>{if(!C.value)return O.value;const r=Number(C.value.amount_base??0);return Math.max(O.value+r,0)}),H=y(()=>{var r,s;return{paid:Number(((r=u.finance)==null?void 0:r.total_paid_base)??0),expenses:Number(((s=u.finance)==null?void 0:s.total_expenses_base)??0)}}),oe=y(()=>{var r;return Number(((r=u.finance)==null?void 0:r.total_paid_base)??0)}),E=y(()=>Number(u.event.show_fee_total??0)),T=y(()=>E.value>0&&oe.value>=E.value),xe=y(()=>E.value<=0?0:Math.max(E.value-oe.value,0)),le=y(()=>E.value<=0?0:Math.max(oe.value-E.value,0)),J=y(()=>{if(E.value<=0)return{label:"Sin fee",className:"bg-gray-500/20 text-gray-300 border border-gray-500/30"};const r=T.value;return{label:r?"Pagado":"Pendiente",className:r?"bg-green-500/20 text-green-300 border border-green-500/40":"bg-yellow-500/20 text-yellow-300 border border-yellow-500/40"}}),re=y(()=>E.value<=0?"Define el fee del show para calcular el estado de pago.":T.value?le.value>0?`Pago completo. Excedente: $${le.value.toFixed(2)} USD.`:"Pago completo.":`Faltan $${xe.value.toFixed(2)} USD para completar el pago.`),Q=y(()=>(_.status||u.event.status||"").toString().trim().toLowerCase()),W=y(()=>{const r=Q.value;if(!r)return{label:"Sin estado",className:"bg-gray-500/20 text-gray-300 border border-gray-500/30"};const s={cotizado:"Cotizado",reservado:"Reservado",confirmado:"Confirmado",pospuesto:"Pospuesto",pagado:"Pagado",cancelado:"Cancelado"},g={cotizado:"bg-gray-500/20 text-gray-200 border border-gray-500/30",reservado:"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30",confirmado:"bg-blue-500/20 text-blue-300 border border-blue-500/30",pospuesto:"bg-orange-500/20 text-orange-300 border border-orange-500/30",pagado:"bg-green-500/20 text-green-300 border border-green-500/30",cancelado:"bg-red-500/20 text-red-300 border border-red-500/30"};return{label:s[r]||r,className:g[r]||"bg-gray-500/20 text-gray-300 border border-gray-500/30"}}),Y=y(()=>{const r=Q.value;return r==="pospuesto"?{title:"Evento pospuesto",message:"Actualiza la nueva fecha y confirma el plan con el equipo.",className:"bg-orange-500/10 border border-orange-500/30 text-orange-200"}:r==="cancelado"?{title:"Evento cancelado",message:"Revisa pagos y gastos para cerrar la contabilidad.",className:"bg-red-500/10 border border-red-500/30 text-red-200"}:null}),Ne=y(()=>{var r,s,g,S,p,F,R,fe,we;return u.event?[{...u.event,title:u.event.title||u.event.name||"Evento",event_date:u.event.event_date||new Date().toISOString(),status:u.event.is_paid?"pagado":"pendiente",total_paid_base:((r=u.finance)==null?void 0:r.total_paid_base)??0,total_expenses_base:((s=u.finance)==null?void 0:s.total_expenses_base)??0,total_personal_expenses_base:((g=u.finance)==null?void 0:g.total_personal_expenses_base)??0,net_base:(((S=u.finance)==null?void 0:S.total_paid_base)??0)-(((p=u.finance)==null?void 0:p.total_expenses_base)??0),label_share_estimated_base:((F=u.finance)==null?void 0:F.share_label)??0,artist_share_estimated_base:((R=u.finance)==null?void 0:R.share_artist)??0,artist_share_after_personal_base:((fe=u.finance)==null?void 0:fe.share_artist_after_personal)??((we=u.finance)==null?void 0:we.share_artist_after_personal_base)??0}]:[]}),pe=()=>{const r=($.currency||"").toUpperCase().trim();$.currency=r||"USD",($.currency==="USD"||!$.exchange_rate_to_base||Number($.exchange_rate_to_base)<=0)&&($.exchange_rate_to_base=1)},ye=()=>{const r=(k.currency||"").toUpperCase().trim();k.currency=r||"USD",(k.currency==="USD"||!k.exchange_rate_to_base||Number(k.exchange_rate_to_base)<=0)&&(k.exchange_rate_to_base=1)},ve=()=>{const r=(x.currency||"").toUpperCase().trim();x.currency=r||"USD",(x.currency==="USD"||!x.exchange_rate_to_base||Number(x.exchange_rate_to_base)<=0)&&(x.exchange_rate_to_base=1)},Ee=()=>{pe(),$.post(route("admin.events.payments.store",u.event.id),{preserveScroll:!0,onSuccess:()=>{$.reset("amount_original","payment_method","is_advance","notes"),i.value=!1,a.value="pagos"}})},be=r=>{d.value&&confirm("¿Eliminar este pago?")&&$.delete(route("admin.events.payments.destroy",r),{preserveScroll:!0})},Fe=()=>{ye(),k.post(route("admin.events.expenses.store",u.event.id),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{k.reset("amount_original","name","description","category","receipt_file"),G.value=!1,a.value="gastos"}})},ge=r=>{d.value&&confirm("¿Eliminar este gasto?")&&k.delete(route("admin.events.expenses.destroy",r),{preserveScroll:!0})},Me=()=>{ve();const r=!!C.value,s=r?route("admin.events.personal-expenses.update",C.value.id):route("admin.events.personal-expenses.store",u.event.id),g=z();x._token=g,x[r?"put":"post"](s,{preserveScroll:!0,headers:g?{"X-CSRF-TOKEN":g}:{},onSuccess:()=>{x.reset("amount_original","expense_type","name","description","payment_method","recipient"),C.value=null,P.value=!1,a.value="gastos-personales"}})},Pe=r=>{if(!d.value||!confirm("¿Eliminar este gasto personal?"))return;const s=z();x._token=s,x.delete(route("admin.events.personal-expenses.destroy",r),{preserveScroll:!0,headers:s?{"X-CSRF-TOKEN":s}:{},onSuccess:()=>{var g;((g=C.value)==null?void 0:g.id)===r&&(C.value=null,P.value=!1)}})},Oe=()=>{const r=z();_._token=r,_.patch(route("admin.events.details.update",u.event.id),{preserveScroll:!0,headers:r?{"X-CSRF-TOKEN":r}:{}})},Te=()=>{if(X.processing||L.value)return;const r=z();X._token=r,X.patch(route("admin.events.roadmanager-payment.update",u.event.id),{preserveScroll:!0,headers:r?{"X-CSRF-TOKEN":r}:{}})},je=y(()=>Q.value!=="pagado"||T.value),ie=()=>{$.payment_date=new Date().toISOString().slice(0,10),$.currency=($.currency||"USD").toUpperCase().trim()||"USD",$.currency==="USD"&&($.exchange_rate_to_base=1),i.value=!0},de=()=>{k.expense_date=new Date().toISOString().slice(0,10),k.currency=(k.currency||"USD").toUpperCase().trim()||"USD",k.currency==="USD"&&(k.exchange_rate_to_base=1),G.value=!0},Ae=()=>{if(O.value<=0){alert("No puedes agregar más gastos personales porque el 70% del artista ya está en 0.");return}C.value=null,x.clearErrors(),x.expense_date=new Date().toISOString().slice(0,10),x.expense_type="",x.name="",x.description="",x.payment_method="",x.recipient="",x.amount_original="",x.currency=(x.currency||"USD").toUpperCase().trim()||"USD",x.exchange_rate_to_base=1,x.currency==="USD"&&(x.exchange_rate_to_base=1),P.value=!0},Ve=r=>{r&&(C.value=r,x.clearErrors(),x.expense_date=r.expense_date||new Date().toISOString().slice(0,10),x.expense_type=r.expense_type||"",x.name=r.name||"",x.description=r.description||"",x.payment_method=r.payment_method||"",x.recipient=r.recipient||"",x.amount_original=r.amount_original??"",x.currency=(r.currency||"USD").toUpperCase().trim()||"USD",x.exchange_rate_to_base=r.exchange_rate_to_base??x.exchange_rate_to_base??1,P.value=!0)},ze=()=>{P.value=!1,C.value=null};return(r,s)=>(o(),Z(Ge,{title:"Finanzas"},{default:q(()=>{var g,S;return[e("div",Xs,[e("div",Ls,[e("div",null,[e("div",Ks,[e("h1",Hs,"Finanzas — "+n(t.event.title),1),m.value?c("",!0):(o(),l("span",{key:0,class:D(["px-3 py-1 text-xs font-semibold rounded-full capitalize border",J.value.className])},n(J.value.label),3))]),e("div",Js,[e("p",null,[s[10]||(s[10]=j(" Artista principal: ",-1)),e("span",Qs,n(((g=t.event.main_artist)==null?void 0:g.name)||((S=t.event.mainArtist)==null?void 0:S.name)||"—"),1)]),e("p",null,[s[11]||(s[11]=j(" Ubicación: ",-1)),e("span",Ws,[t.event.city||t.event.country?(o(),l("span",Ys,[j(n(t.event.city)+n(t.event.city&&t.event.country?",":"")+" "+n(t.event.country)+" ",1),t.event.location?(o(),l("span",Zs,n(t.event.location),1)):c("",!0),t.event.venue_address?(o(),l("span",ea,n(t.event.venue_address),1)):c("",!0)])):(o(),l("span",ta,[e("span",sa,n(t.event.location||"—"),1),t.event.venue_address?(o(),l("span",aa,n(t.event.venue_address),1)):c("",!0)]))])])])]),e("div",na,[N(v(qe),{href:r.route("admin.events.index"),class:"text-[#ffa236] hover:underline"},{default:q(()=>[...s[12]||(s[12]=[j(" ← Volver ",-1)])]),_:1},8,["href"])])]),m.value?c("",!0):(o(),l("div",oa,[e("div",la,[s[13]||(s[13]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Fee negociado",-1)),e("p",ra,n(t.event.currency||"USD")+" "+n(E.value.toFixed(2)),1),s[14]||(s[14]=e("p",{class:"text-gray-500 text-xs mt-1"},"Total acordado para el show.",-1))]),e("div",ia,[s[15]||(s[15]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Total pagado",-1)),e("p",da,"$ "+n(U.value.paid.toFixed(2)),1),s[16]||(s[16]=e("p",{class:"text-gray-500 text-xs mt-1"},"Pagos registrados (USD).",-1))]),e("div",ua,[s[17]||(s[17]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Gastos del evento",-1)),e("p",ca,"$ "+n(U.value.expenses.toFixed(2)),1),s[18]||(s[18]=e("p",{class:"text-gray-500 text-xs mt-1"},"Gastos generales (USD).",-1))]),e("div",ma,[s[19]||(s[19]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Neto del evento",-1)),e("p",xa,"$ "+n(U.value.net.toFixed(2)),1),s[20]||(s[20]=e("p",{class:"text-gray-500 text-xs mt-1"},"Pagos − gastos.",-1))]),e("div",pa,[s[21]||(s[21]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"30% Dilo",-1)),e("p",ya,"$ "+n(U.value.shareLabel.toFixed(2)),1),s[22]||(s[22]=e("p",{class:"text-gray-500 text-xs mt-1"},"Sobre neto (USD).",-1))]),e("div",va,[s[23]||(s[23]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"70% Artista (antes)",-1)),e("p",ba,"$ "+n(U.value.shareArtist.toFixed(2)),1),s[24]||(s[24]=e("p",{class:"text-gray-500 text-xs mt-1"},"Sobre neto (USD).",-1))]),e("div",ga,[s[25]||(s[25]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Gastos personales",-1)),e("p",fa,"$ "+n(K.value.toFixed(2)),1),s[26]||(s[26]=e("p",{class:"text-gray-500 text-xs mt-1"},"Descuento al 70%.",-1))]),e("div",wa,[s[27]||(s[27]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"70% Artista (después)",-1)),e("p",ha,"$ "+n(me.value.toFixed(2)),1),s[28]||(s[28]=e("p",{class:"text-gray-500 text-xs mt-1"},"70% − gastos personales.",-1))])])),m.value?(o(),l("div",$a,[e("div",ka,[e("div",_a,[e("div",null,[s[29]||(s[29]=e("h2",{class:"text-lg font-semibold"},"Pago pendiente al road manager",-1)),s[30]||(s[30]=e("p",{class:"text-sm text-gray-400"}," Corresponde al porcentaje restante despues del adelanto. ",-1)),e("p",Sa,n(t.event.currency||"USD")+" "+n(Ce.value.toFixed(2)),1)]),e("div",Da,[L.value?(o(),l("div",Ua,[s[31]||(s[31]=j(" Pago confirmado ",-1)),L.value?(o(),l("span",Na,n(v(M)(L.value)),1)):c("",!0)])):(o(),l("button",{key:0,type:"button",class:"btn-primary",disabled:v(X).processing,onClick:Te}," Confirmar pago recibido ",8,Ca))])])]),e("div",Ea,[s[36]||(s[36]=e("div",{class:"flex items-center justify-between mb-4"},[e("div",null,[e("h2",{class:"text-lg font-semibold"},"Información del evento"),e("p",{class:"text-sm text-gray-400"},"Detalles generales del show.")])],-1)),e("div",Fa,[e("div",Ma,[s[32]||(s[32]=e("p",{class:"text-gray-400"},"Ubicación",-1)),e("p",Pa,[t.event.city||t.event.country?(o(),l("span",Oa,n(t.event.city)+n(t.event.city&&t.event.country?",":"")+" "+n(t.event.country),1)):(o(),l("span",Ta,n(t.event.location||"—"),1))]),t.event.location?(o(),l("p",ja,n(t.event.location),1)):c("",!0),t.event.venue_address?(o(),l("p",Aa,n(t.event.venue_address),1)):c("",!0)]),e("div",Va,[s[33]||(s[33]=e("p",{class:"text-gray-400"},"Tipo de evento",-1)),e("p",za,n(t.event.event_type||"—"),1),s[34]||(s[34]=e("p",{class:"text-gray-400 mt-2"},"Estado",-1)),e("span",{class:D(["inline-flex px-2 py-1 rounded-full text-xs font-semibold border mt-1",W.value.className])},n(W.value.label),3)]),e("div",Ra,[s[35]||(s[35]=e("p",{class:"text-gray-400"},"Fecha del evento",-1)),e("p",Ba,n(t.event.event_date?v(M)(t.event.event_date):"—"),1)])])]),e("div",Ia,[e("div",qa,[s[37]||(s[37]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Total pagos registrados por ti",-1)),e("p",Ga,"$ "+n(H.value.paid.toFixed(2)),1)]),e("div",Xa,[s[38]||(s[38]=e("p",{class:"text-gray-400 text-xs uppercase tracking-wide"},"Total gastos registrados por ti",-1)),e("p",La,"$ "+n(H.value.expenses.toFixed(2)),1)])]),e("div",Ka,[e("div",Ha,[e("div",null,[s[39]||(s[39]=e("h2",{class:"text-lg font-semibold"},"Tus pagos",-1)),e("p",Ja,"Total: $ "+n(H.value.paid.toFixed(2)),1)]),e("button",{type:"button",class:"btn-primary",onClick:ie},"+ Nuevo pago")]),N(he,{payments:t.event.payments||[],"can-delete":!1,onDelete:be},null,8,["payments"])]),e("div",Qa,[e("div",Wa,[e("div",null,[s[40]||(s[40]=e("h2",{class:"text-lg font-semibold"},"Tus gastos",-1)),e("p",Ya,"Total: $ "+n(H.value.expenses.toFixed(2)),1)]),e("button",{type:"button",class:"btn-secondary",onClick:de},"+ Nuevo gasto")]),N($e,{expenses:t.event.expenses||[],"can-delete":!1,onDelete:ge},null,8,["expenses"])])])):(o(),l("div",Za,[Y.value?(o(),l("div",{key:0,class:D(["rounded-lg p-4 text-sm",Y.value.className])},[e("p",en,n(Y.value.title),1),e("p",tn,n(Y.value.message),1)],2)):c("",!0),e("div",sn,[d.value?(o(),l("button",{key:0,type:"button",class:D(["tab-btn",a.value==="resumen"?"tab-btn--active":"tab-btn--idle"]),onClick:s[0]||(s[0]=p=>a.value="resumen")}," Resumen ",2)):c("",!0),e("button",{type:"button",class:D(["tab-btn",a.value==="pagos"?"tab-btn--active":"tab-btn--idle"]),onClick:s[1]||(s[1]=p=>a.value="pagos")}," Pagos ",2),e("button",{type:"button",class:D(["tab-btn",a.value==="gastos"?"tab-btn--active":"tab-btn--idle"]),onClick:s[2]||(s[2]=p=>a.value="gastos")}," Gastos ",2),d.value?(o(),l("button",{key:1,type:"button",class:D(["tab-btn",a.value==="gastos-personales"?"tab-btn--active":"tab-btn--idle"]),onClick:s[3]||(s[3]=p=>a.value="gastos-personales")}," Gastos personales ",2)):c("",!0),d.value?(o(),l("button",{key:2,type:"button",class:D(["tab-btn",a.value==="analisis"?"tab-btn--active":"tab-btn--idle"]),onClick:s[4]||(s[4]=p=>a.value="analisis")}," Análisis ",2)):c("",!0),s[41]||(s[41]=e("div",{class:"flex-1"},null,-1)),e("div",{class:"flex gap-2"},[e("button",{type:"button",class:"btn-primary",onClick:ie},"+ Nuevo pago"),e("button",{type:"button",class:"btn-secondary",onClick:de},"+ Nuevo gasto")])]),d.value&&a.value==="resumen"?(o(),l("div",an,[e("div",nn,[e("div",on,[s[42]||(s[42]=e("div",null,[e("h2",{class:"text-lg font-semibold"},"Estado y fechas"),e("p",{class:"text-sm text-gray-400"},"Actualiza el estado del evento y fechas clave.")],-1)),e("span",{class:D(["px-3 py-1 rounded-full text-xs font-semibold border",W.value.className])},n(W.value.label),3)]),e("form",{onSubmit:ee(Oe,["prevent"]),class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},[e("div",null,[s[49]||(s[49]=e("label",{class:"text-gray-300 text-sm"},"Estado",-1)),b(e("select",{"onUpdate:modelValue":s[5]||(s[5]=p=>v(_).status=p),class:"input"},[s[43]||(s[43]=e("option",{value:""},"Selecciona un estado",-1)),s[44]||(s[44]=e("option",{value:"cotizado"},"Cotizado",-1)),s[45]||(s[45]=e("option",{value:"reservado"},"Reservado",-1)),s[46]||(s[46]=e("option",{value:"confirmado"},"Confirmado",-1)),s[47]||(s[47]=e("option",{value:"pospuesto"},"Pospuesto",-1)),e("option",{value:"pagado",disabled:!T.value},"Pagado",8,ln),s[48]||(s[48]=e("option",{value:"cancelado"},"Cancelado",-1))],512),[[te,v(_).status]]),v(_).errors.status?(o(),l("p",rn,n(v(_).errors.status),1)):Q.value==="pagado"&&re.value?(o(),l("p",dn,n(re.value),1)):c("",!0)]),e("div",null,[s[50]||(s[50]=e("label",{class:"text-gray-300 text-sm"},"Fecha del evento",-1)),b(e("input",{"onUpdate:modelValue":s[6]||(s[6]=p=>v(_).event_date=p),type:"date",class:"input"},null,512),[[f,v(_).event_date]]),v(_).errors.event_date?(o(),l("p",un,n(v(_).errors.event_date),1)):c("",!0)]),e("div",null,[s[51]||(s[51]=e("label",{class:"text-gray-300 text-sm"},"Fecha pago final",-1)),b(e("input",{"onUpdate:modelValue":s[7]||(s[7]=p=>v(_).full_payment_due_date=p),type:"date",class:"input"},null,512),[[f,v(_).full_payment_due_date]]),v(_).errors.full_payment_due_date?(o(),l("p",cn,n(v(_).errors.full_payment_due_date),1)):c("",!0)]),e("div",mn,[e("button",{type:"submit",class:"btn-primary",disabled:v(_).processing||!je.value}," Guardar cambios ",8,xn)])],32)]),e("div",pn,[e("div",yn,[s[52]||(s[52]=e("div",null,[e("h2",{class:"text-lg font-semibold"},"Estado de pago"),e("p",{class:"text-sm text-gray-400"}," Automático según el total pagado vs el fee negociado. ")],-1)),e("span",{class:D(["px-3 py-1 rounded-full text-xs font-semibold border",J.value.className])},n(J.value.label),3)]),e("div",vn,[e("div",bn,[s[53]||(s[53]=e("p",{class:"text-gray-400"},"Diferencia vs fee",-1)),e("p",{class:D(["text-lg font-semibold",T.value?"text-green-300":"text-yellow-300"])},n(T.value?`+ $${le.value.toFixed(2)}`:`- $${xe.value.toFixed(2)}`),3),s[54]||(s[54]=e("p",{class:"text-gray-500 text-xs mt-1"}," Se calcula con el fee negociado y el total pagado. ",-1))]),e("div",gn,[s[55]||(s[55]=e("p",{class:"text-gray-400"},"Nota",-1)),e("p",fn,n(re.value),1)])])]),e("div",wn,[s[64]||(s[64]=e("div",{class:"flex items-center justify-between mb-4"},[e("div",null,[e("h2",{class:"text-lg font-semibold"},"Datos del evento"),e("p",{class:"text-sm text-gray-400"},"Información general y condiciones del show.")])],-1)),e("div",hn,[e("div",$n,[s[56]||(s[56]=e("p",{class:"text-gray-400"},"Ubicación",-1)),e("p",kn,[t.event.city||t.event.country?(o(),l("span",_n,n(t.event.city)+n(t.event.city&&t.event.country?",":"")+" "+n(t.event.country),1)):(o(),l("span",Sn,n(t.event.location||"—"),1))]),t.event.location?(o(),l("p",Dn,n(t.event.location),1)):c("",!0),t.event.venue_address?(o(),l("p",Cn,n(t.event.venue_address),1)):c("",!0)]),e("div",Un,[s[57]||(s[57]=e("p",{class:"text-gray-400"},"Tipo de evento",-1)),e("p",Nn,n(t.event.event_type||"—"),1)]),e("div",En,[s[58]||(s[58]=e("p",{class:"text-gray-400"},"Fee del show",-1)),e("p",Fn,[e("span",null,n(t.event.currency||"USD"),1),e("span",Mn,n(Number(t.event.show_fee_total??0).toFixed(2)),1)]),s[59]||(s[59]=e("p",{class:"text-gray-400 mt-2"},"Moneda",-1)),e("p",Pn,n(t.event.currency||"USD"),1)]),e("div",On,[s[60]||(s[60]=e("p",{class:"text-gray-400"},"% Anticipo",-1)),e("p",Tn,n(t.event.advance_percentage??50)+"%",1),s[61]||(s[61]=e("p",{class:"text-gray-400 mt-2"},"¿Se espera anticipo?",-1)),e("p",jn,n(t.event.advance_expected?"Sí":"No"),1)]),e("div",An,[s[62]||(s[62]=e("p",{class:"text-gray-400"},"Fecha pago final",-1)),e("p",Vn,n(t.event.full_payment_due_date?v(M)(t.event.full_payment_due_date):"—"),1)]),e("div",zn,[s[63]||(s[63]=e("p",{class:"text-gray-400"},"Fecha del evento",-1)),e("p",Rn,n(t.event.event_date?v(M)(t.event.event_date):"—"),1)])])]),ne.value.length?(o(),l("div",Bn,[s[66]||(s[66]=e("h2",{class:"text-lg font-semibold mb-4"},"Confirmacion road managers",-1)),e("div",In,[(o(!0),l(A,null,V(ne.value,p=>{var F;return o(),l("div",{key:p.id,class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 border-b border-[#2a2a2a] pb-2"},[e("div",null,[e("p",qn,n(p.name),1),e("p",Gn,n(p.email),1)]),e("div",Xn,[(F=p.pivot)!=null&&F.payment_confirmed_at?(o(),l("span",Ln,[s[65]||(s[65]=j(" Confirmado ",-1)),e("span",Kn,n(v(M)(p.pivot.payment_confirmed_at)),1)])):(o(),l("span",Hn,"Pendiente"))])])}),128))])])):c("",!0)])):a.value==="pagos"?(o(),l("div",Jn,[e("div",Qn,[e("div",null,[s[67]||(s[67]=e("h2",{class:"text-lg font-semibold"},"Pagos",-1)),e("p",Wn,"Total: $ "+n(U.value.paid.toFixed(2)),1)]),e("button",{type:"button",class:"btn-primary",onClick:ie},"+ Nuevo pago")]),N(he,{payments:t.event.payments||[],"can-delete":d.value,onDelete:be},null,8,["payments","can-delete"])])):a.value==="gastos"?(o(),l("div",Yn,[e("div",Zn,[e("div",null,[s[68]||(s[68]=e("h2",{class:"text-lg font-semibold"},"Gastos",-1)),e("p",eo,"Total: $ "+n(U.value.expenses.toFixed(2)),1)]),e("button",{type:"button",class:"btn-secondary",onClick:de},"+ Nuevo gasto")]),N($e,{expenses:t.event.expenses||[],"can-delete":d.value,onDelete:ge},null,8,["expenses","can-delete"])])):d.value&&a.value==="gastos-personales"?(o(),l("div",to,[e("div",so,[e("div",null,[s[69]||(s[69]=e("h2",{class:"text-lg font-semibold"},"Gastos personales",-1)),e("p",ao," Total: $ "+n(K.value.toFixed(2)),1),e("p",no," 70% disponible: $ "+n(O.value.toFixed(2))+" · 70% luego de gastos: $ "+n(me.value.toFixed(2)),1)]),e("button",{type:"button",class:"btn-secondary",disabled:O.value<=0,onClick:Ae}," + Agregar gasto personal ",8,oo)]),O.value<=0?(o(),l("div",lo,[...s[70]||(s[70]=[e("p",{class:"text-amber-200 text-sm font-semibold"}," No puedes agregar más gastos personales porque el 70% del artista ya está en 0. ",-1)])])):c("",!0),N(Gs,{expenses:Se.value,"can-edit":d.value,"can-delete":d.value,onEdit:Ve,onDelete:Pe},null,8,["expenses","can-edit","can-delete"])])):d.value?(o(),l("div",ro,[N(Xe,{totals:U.value,events:Ne.value,currency:"$"},null,8,["totals","events"])])):c("",!0)])),N(lt,{show:i.value,form:v($),"payment-method-options":ke,"normalize-currency":pe,onClose:s[8]||(s[8]=p=>i.value=!1),onSubmit:Ee},null,8,["show","form"]),N($t,{show:G.value,form:v(k),"normalize-currency":ye,onClose:s[9]||(s[9]=p=>G.value=!1),onSubmit:Fe},null,8,["show","form"]),N(It,{show:P.value,form:v(x),"payment-method-options":_e,"normalize-currency":ve,remaining:Ue.value,"is-editing":!!C.value,onClose:ze,onSubmit:Me},null,8,["show","form","remaining","is-editing"])])]}),_:1}))}},bo=se(io,[["__scopeId","data-v-c2b4f6f9"]]);export{bo as default};
