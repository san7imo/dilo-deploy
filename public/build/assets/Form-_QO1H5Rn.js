import{s as C,x as m,u as M,y as S,e as r,a as t,f as y,j as i,v as d,g as s,t as v,k as g,z as w,q as D,F as c,i as f,l as E,o as p}from"./app-wqEFckxb.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const j={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},N={key:0,class:"text-red-500 text-sm mt-1"},O={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},R={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},q={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},B={key:0,class:"text-red-500 text-sm mt-1"},T={key:0},G={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},L={class:"mt-3 flex items-center gap-2"},W=["value"],$={key:1},H=["value"],J=["value"],K={class:"flex justify-end"},Q={type:"submit",class:"btn-primary"},X={__name:"Form",props:{event:{type:Object,default:()=>({})},artists:{type:Array,default:()=>[]},roadManagers:{type:Array,default:()=>[]},mode:{type:String,default:"create"}},setup(x){const o=x,{props:b}=C(),_=m(()=>{var n,e;return((e=(n=b.auth)==null?void 0:n.user)==null?void 0:e.role_names)||[]}),P=m(()=>{var n,e;return((e=(n=b.auth)==null?void 0:n.user)==null?void 0:e.id)||null}),U=m(()=>_.value.includes("admin")),V=m(()=>_.value.includes("roadmanager")),k=m(()=>!V.value),l=M({title:o.event.title||"",description:o.event.description||"",location:o.event.location||"",event_date:o.event.event_date||"",event_type:o.event.event_type||"",country:o.event.country||"",city:o.event.city||"",venue_address:o.event.venue_address||"",whatsapp_event:o.event.whatsapp_event||"",page_tickets:o.event.page_tickets||"",show_fee_total:o.event.show_fee_total||"",currency:o.event.currency||"USD",advance_percentage:o.event.advance_percentage||50,advance_expected:o.event.advance_expected??!0,full_payment_due_date:o.event.full_payment_due_date||"",status:o.event.status||"",artist_ids:o.event.artists?o.event.artists.map(n=>n.id):[],main_artist_id:o.event.main_artist_id||null,road_manager_ids:o.event.road_managers?o.event.road_managers.map(n=>n.id):[],poster_file:null});S(()=>l.artist_ids,n=>{if(Array.isArray(n)&&n.length===1){l.main_artist_id=n[0];return}n!=null&&n.includes(l.main_artist_id)||(l.main_artist_id=null)},{deep:!0}),S([V,P],([n,e])=>{o.mode==="create"&&n&&e&&(l.road_manager_ids=[e])},{immediate:!0});const F=()=>{console.log("ðŸŽ¤ Enviando formulario de evento...",l.data());const n="post",e=o.mode==="edit"?route("admin.events.update",o.event.id):route("admin.events.store");l.transform(a=>{const u={...a,_method:o.mode==="edit"?"put":"post"};return U.value||(delete u.show_fee_total,delete u.currency,delete u.advance_percentage,delete u.advance_expected,delete u.full_payment_due_date),k.value||delete u.road_manager_ids,u}).submit(n,e,{forceFormData:!0,onStart:()=>console.log("ðŸš€ Enviando request a:",e),onProgress:a=>console.log("ðŸ“¤ Subiendo...",a),onError:a=>{console.group("âŒ Errores de validaciÃ³n");for(const[u,A]of Object.entries(a))console.log(`${u}:`,A);console.groupEnd()},onSuccess:()=>console.log("âœ… Evento guardado correctamente"),onFinish:()=>console.log("ðŸ Proceso finalizado")})};return(n,e)=>(p(),r("form",{onSubmit:E(F,["prevent"]),class:"space-y-6"},[t("div",j,[t("div",null,[e[20]||(e[20]=t("label",{class:"text-gray-300 text-sm"},"TÃ­tulo del evento",-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s(l).title=a),type:"text",class:"input",placeholder:"Nombre del evento"},null,512),[[d,s(l).title]]),s(l).errors.title?(p(),r("p",N,v(s(l).errors.title),1)):y("",!0)]),t("div",null,[e[21]||(e[21]=t("label",{class:"text-gray-300 text-sm"},"Fecha del evento",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s(l).event_date=a),type:"date",class:"input"},null,512),[[d,s(l).event_date]])])]),t("div",null,[e[22]||(e[22]=t("label",{class:"text-gray-300 text-sm"},"UbicaciÃ³n",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s(l).location=a),type:"text",class:"input",placeholder:"Ciudad, paÃ­s o venue"},null,512),[[d,s(l).location]])]),t("div",O,[t("div",null,[e[23]||(e[23]=t("label",{class:"text-gray-300 text-sm"},"WhatsApp del evento",-1)),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>s(l).whatsapp_event=a),type:"text",class:"input",placeholder:"Ej: +57 300 123 4567 o https://wa.me/573001234567"},null,512),[[d,s(l).whatsapp_event]]),e[24]||(e[24]=t("p",{class:"text-gray-500 text-xs mt-1"},"Opcional. Se mostrarÃ¡ solo si tiene valor.",-1))]),t("div",null,[e[25]||(e[25]=t("label",{class:"text-gray-300 text-sm"},"PÃ¡gina de tickets",-1)),i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>s(l).page_tickets=a),type:"text",class:"input",placeholder:"https://tus-tickets.com/evento"},null,512),[[d,s(l).page_tickets]]),e[26]||(e[26]=t("p",{class:"text-gray-500 text-xs mt-1"},"Opcional. Se mostrarÃ¡ solo si tiene valor.",-1))])]),t("div",R,[t("div",null,[e[27]||(e[27]=t("label",{class:"text-gray-300 text-sm"},"PaÃ­s",-1)),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s(l).country=a),type:"text",class:"input",placeholder:"PaÃ­s"},null,512),[[d,s(l).country]])]),t("div",null,[e[28]||(e[28]=t("label",{class:"text-gray-300 text-sm"},"Ciudad",-1)),i(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s(l).city=a),type:"text",class:"input",placeholder:"Ciudad"},null,512),[[d,s(l).city]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"text-gray-300 text-sm"},"DirecciÃ³n del venue",-1)),i(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>s(l).venue_address=a),type:"text",class:"input",placeholder:"DirecciÃ³n"},null,512),[[d,s(l).venue_address]])])]),t("div",q,[t("div",null,[e[31]||(e[31]=t("label",{class:"text-gray-300 text-sm"},"Tipo de evento",-1)),i(t("select",{"onUpdate:modelValue":e[8]||(e[8]=a=>s(l).event_type=a),class:"input"},[...e[30]||(e[30]=[w('<option value="" data-v-6f69160a>Selecciona un tipo</option><option value="masivo" data-v-6f69160a>Masivo</option><option value="publico" data-v-6f69160a>PÃºblico</option><option value="discoteca" data-v-6f69160a>Discoteca</option><option value="privado" data-v-6f69160a>Privado</option><option value="meet_and_greet" data-v-6f69160a>Meet &amp; Greet</option>',6)])],512),[[g,s(l).event_type]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"text-gray-300 text-sm"},"Estado",-1)),i(t("select",{"onUpdate:modelValue":e[9]||(e[9]=a=>s(l).status=a),class:"input"},[...e[32]||(e[32]=[w('<option value="" data-v-6f69160a>Selecciona un estado</option><option value="cotizado" data-v-6f69160a>Cotizado</option><option value="reservado" data-v-6f69160a>Reservado</option><option value="confirmado" data-v-6f69160a>Confirmado</option><option value="pospuesto" data-v-6f69160a>Pospuesto</option><option value="pagado" data-v-6f69160a>Pagado</option><option value="cancelado" data-v-6f69160a>Cancelado</option>',7)])],512),[[g,s(l).status]]),e[34]||(e[34]=t("p",{class:"text-gray-500 text-xs mt-1"}," Pagado solo aplica cuando los pagos cubren el fee del show. ",-1))])]),t("div",null,[e[35]||(e[35]=t("label",{class:"text-gray-300 text-sm"},"DescripciÃ³n",-1)),i(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=a=>s(l).description=a),rows:"4",class:"input",placeholder:"Detalles del evento..."},null,512),[[d,s(l).description]])]),t("div",null,[e[36]||(e[36]=t("label",{class:"text-gray-300 text-sm"},"PÃ³ster / Afiche",-1)),t("input",{type:"file",class:"input-file",onChange:e[11]||(e[11]=a=>{s(l).poster_file=a.target.files[0],console.log("ðŸ–¼ Archivo seleccionado:",a.target.files[0])})},null,32),s(l).errors.poster_file?(p(),r("p",B,v(s(l).errors.poster_file),1)):y("",!0)]),U.value?(p(),r("div",T,[e[42]||(e[42]=t("label",{class:"text-gray-300 text-sm"},"Finanzas del evento",-1)),t("div",G,[t("div",null,[e[37]||(e[37]=t("label",{class:"text-gray-300 text-sm"},"Fee total (show)",-1)),i(t("input",{"onUpdate:modelValue":e[12]||(e[12]=a=>s(l).show_fee_total=a),type:"number",step:"0.01",class:"input",placeholder:"0.00"},null,512),[[d,s(l).show_fee_total]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"text-gray-300 text-sm"},"Moneda",-1)),i(t("input",{"onUpdate:modelValue":e[13]||(e[13]=a=>s(l).currency=a),type:"text",class:"input",placeholder:"USD",maxlength:"3"},null,512),[[d,s(l).currency]])]),t("div",null,[e[39]||(e[39]=t("label",{class:"text-gray-300 text-sm"},"% Anticipo",-1)),i(t("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>s(l).advance_percentage=a),type:"number",step:"0.01",class:"input",placeholder:"50"},null,512),[[d,s(l).advance_percentage]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"text-gray-300 text-sm"},"Fecha pago final",-1)),i(t("input",{"onUpdate:modelValue":e[15]||(e[15]=a=>s(l).full_payment_due_date=a),type:"date",class:"input"},null,512),[[d,s(l).full_payment_due_date]])])]),t("div",L,[i(t("input",{"onUpdate:modelValue":e[16]||(e[16]=a=>s(l).advance_expected=a),type:"checkbox",class:"checkbox"},null,512),[[D,s(l).advance_expected]]),e[41]||(e[41]=t("span",{class:"text-gray-300 text-sm"},"Â¿Se espera anticipo?",-1))])])):y("",!0),t("div",null,[e[43]||(e[43]=t("label",{class:"text-gray-300 text-sm"},"Lista de artistas",-1)),i(t("select",{"onUpdate:modelValue":e[17]||(e[17]=a=>s(l).artist_ids=a),multiple:"",class:"input"},[(p(!0),r(c,null,f(x.artists,a=>(p(),r("option",{key:a.id,value:a.id},v(a.name),9,W))),128))],512),[[g,s(l).artist_ids]]),e[44]||(e[44]=t("p",{class:"text-gray-500 text-xs mt-1"}," Puedes seleccionar varios artistas (Ctrl/Cmd + click) ",-1))]),k.value?(p(),r("div",$,[e[45]||(e[45]=t("label",{class:"text-gray-300 text-sm"},"Road managers asignados",-1)),i(t("select",{"onUpdate:modelValue":e[18]||(e[18]=a=>s(l).road_manager_ids=a),multiple:"",class:"input"},[(p(!0),r(c,null,f(x.roadManagers,a=>(p(),r("option",{key:a.id,value:a.id},v(a.name)+" ("+v(a.email)+") ",9,H))),128))],512),[[g,s(l).road_manager_ids]]),e[46]||(e[46]=t("p",{class:"text-gray-500 text-xs mt-1"}," Selecciona los road managers que podran ver y reportar finanzas de este evento. ",-1))])):y("",!0),t("div",null,[e[48]||(e[48]=t("label",{class:"text-gray-300 text-sm"},"Artista principal",-1)),i(t("select",{"onUpdate:modelValue":e[19]||(e[19]=a=>s(l).main_artist_id=a),class:"input"},[e[47]||(e[47]=t("option",{value:"",disabled:""},"Seleccione el artista principal",-1)),(p(!0),r(c,null,f(x.artists.filter(a=>s(l).artist_ids.includes(a.id)),a=>(p(),r("option",{key:a.id,value:a.id},v(a.name),9,J))),128))],512),[[g,s(l).main_artist_id]]),e[49]||(e[49]=t("p",{class:"text-gray-500 text-xs mt-1"}," selecciona el artista principal de la lista de invitados ",-1))]),t("div",K,[t("button",Q,v(o.mode==="edit"?"Actualizar evento":"Guardar evento"),1)])],32))}},h=z(X,[["__scopeId","data-v-6f69160a"]]);export{h as default};
