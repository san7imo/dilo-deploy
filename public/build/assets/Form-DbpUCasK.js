import{u as V,y as S,e as r,a as e,j as n,f as x,v as d,g as o,t as p,k as v,z as y,q as _,F as g,i as f,l as k,o as u}from"./app-CzY7Gfd0.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const F={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},P={key:0,class:"text-red-500 text-sm mt-1"},w={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},D={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},A={key:0,class:"text-red-500 text-sm mt-1"},M={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},E={class:"mt-3 flex items-center gap-2"},z=["value"],j=["value"],N=["value"],q={class:"flex justify-end"},B={type:"submit",class:"btn-primary"},T={__name:"Form",props:{event:{type:Object,default:()=>({})},artists:{type:Array,default:()=>[]},roadManagers:{type:Array,default:()=>[]},mode:{type:String,default:"create"}},setup(m){const s=m,a=V({title:s.event.title||"",description:s.event.description||"",location:s.event.location||"",event_date:s.event.event_date||"",event_type:s.event.event_type||"",country:s.event.country||"",city:s.event.city||"",venue_address:s.event.venue_address||"",show_fee_total:s.event.show_fee_total||"",currency:s.event.currency||"USD",advance_percentage:s.event.advance_percentage||50,advance_expected:s.event.advance_expected??!0,full_payment_due_date:s.event.full_payment_due_date||"",status:s.event.status||"",artist_ids:s.event.artists?s.event.artists.map(i=>i.id):[],main_artist_id:s.event.main_artist_id||null,road_manager_ids:s.event.road_managers?s.event.road_managers.map(i=>i.id):[],poster_file:null});S(()=>a.artist_ids,i=>{if(Array.isArray(i)&&i.length===1){a.main_artist_id=i[0];return}i!=null&&i.includes(a.main_artist_id)||(a.main_artist_id=null)},{deep:!0});const b=()=>{console.log("ðŸŽ¤ Enviando formulario de evento...",a.data());const i="post",t=s.mode==="edit"?route("admin.events.update",s.event.id):route("admin.events.store");a.transform(l=>({...l,_method:s.mode==="edit"?"put":"post"})).submit(i,t,{forceFormData:!0,onStart:()=>console.log("ðŸš€ Enviando request a:",t),onProgress:l=>console.log("ðŸ“¤ Subiendo...",l),onError:l=>{console.group("âŒ Errores de validaciÃ³n");for(const[c,U]of Object.entries(l))console.log(`${c}:`,U);console.groupEnd()},onSuccess:()=>console.log("âœ… Evento guardado correctamente"),onFinish:()=>console.log("ðŸ Proceso finalizado")})};return(i,t)=>(u(),r("form",{onSubmit:k(b,["prevent"]),class:"space-y-6"},[e("div",F,[e("div",null,[t[18]||(t[18]=e("label",{class:"text-gray-300 text-sm"},"TÃ­tulo del evento",-1)),n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o(a).title=l),type:"text",class:"input",placeholder:"Nombre del evento"},null,512),[[d,o(a).title]]),o(a).errors.title?(u(),r("p",P,p(o(a).errors.title),1)):x("",!0)]),e("div",null,[t[19]||(t[19]=e("label",{class:"text-gray-300 text-sm"},"Fecha del evento",-1)),n(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>o(a).event_date=l),type:"date",class:"input"},null,512),[[d,o(a).event_date]])])]),e("div",null,[t[20]||(t[20]=e("label",{class:"text-gray-300 text-sm"},"UbicaciÃ³n",-1)),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o(a).location=l),type:"text",class:"input",placeholder:"Ciudad, paÃ­s o venue"},null,512),[[d,o(a).location]])]),e("div",w,[e("div",null,[t[21]||(t[21]=e("label",{class:"text-gray-300 text-sm"},"PaÃ­s",-1)),n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>o(a).country=l),type:"text",class:"input",placeholder:"PaÃ­s"},null,512),[[d,o(a).country]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"text-gray-300 text-sm"},"Ciudad",-1)),n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o(a).city=l),type:"text",class:"input",placeholder:"Ciudad"},null,512),[[d,o(a).city]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"text-gray-300 text-sm"},"DirecciÃ³n del venue",-1)),n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>o(a).venue_address=l),type:"text",class:"input",placeholder:"DirecciÃ³n"},null,512),[[d,o(a).venue_address]])])]),e("div",D,[e("div",null,[t[25]||(t[25]=e("label",{class:"text-gray-300 text-sm"},"Tipo de evento",-1)),n(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>o(a).event_type=l),class:"input"},[...t[24]||(t[24]=[y('<option value="" data-v-4ffbb336>Selecciona un tipo</option><option value="masivo" data-v-4ffbb336>Masivo</option><option value="publico" data-v-4ffbb336>PÃºblico</option><option value="discoteca" data-v-4ffbb336>Discoteca</option><option value="privado" data-v-4ffbb336>Privado</option><option value="meet_and_greet" data-v-4ffbb336>Meet &amp; Greet</option>',6)])],512),[[v,o(a).event_type]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"text-gray-300 text-sm"},"Estado",-1)),n(e("select",{"onUpdate:modelValue":t[7]||(t[7]=l=>o(a).status=l),class:"input"},[...t[26]||(t[26]=[y('<option value="" data-v-4ffbb336>Selecciona un estado</option><option value="cotizado" data-v-4ffbb336>Cotizado</option><option value="reservado" data-v-4ffbb336>Reservado</option><option value="confirmado" data-v-4ffbb336>Confirmado</option><option value="pospuesto" data-v-4ffbb336>Pospuesto</option><option value="pagado" data-v-4ffbb336>Pagado</option><option value="cancelado" data-v-4ffbb336>Cancelado</option>',7)])],512),[[v,o(a).status]]),t[28]||(t[28]=e("p",{class:"text-gray-500 text-xs mt-1"}," Pagado solo aplica cuando los pagos cubren el fee del show. ",-1))])]),e("div",null,[t[29]||(t[29]=e("label",{class:"text-gray-300 text-sm"},"DescripciÃ³n",-1)),n(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=l=>o(a).description=l),rows:"4",class:"input",placeholder:"Detalles del evento..."},null,512),[[d,o(a).description]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"text-gray-300 text-sm"},"PÃ³ster / Afiche",-1)),e("input",{type:"file",class:"input-file",onChange:t[9]||(t[9]=l=>{o(a).poster_file=l.target.files[0],console.log("ðŸ–¼ Archivo seleccionado:",l.target.files[0])})},null,32),o(a).errors.poster_file?(u(),r("p",A,p(o(a).errors.poster_file),1)):x("",!0)]),e("div",null,[t[36]||(t[36]=e("label",{class:"text-gray-300 text-sm"},"Finanzas del evento",-1)),e("div",M,[e("div",null,[t[31]||(t[31]=e("label",{class:"text-gray-300 text-sm"},"Fee total (show)",-1)),n(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>o(a).show_fee_total=l),type:"number",step:"0.01",class:"input",placeholder:"0.00"},null,512),[[d,o(a).show_fee_total]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"text-gray-300 text-sm"},"Moneda",-1)),n(e("input",{"onUpdate:modelValue":t[11]||(t[11]=l=>o(a).currency=l),type:"text",class:"input",placeholder:"USD",maxlength:"3"},null,512),[[d,o(a).currency]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"text-gray-300 text-sm"},"% Anticipo",-1)),n(e("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>o(a).advance_percentage=l),type:"number",step:"0.01",class:"input",placeholder:"50"},null,512),[[d,o(a).advance_percentage]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"text-gray-300 text-sm"},"Fecha pago final",-1)),n(e("input",{"onUpdate:modelValue":t[13]||(t[13]=l=>o(a).full_payment_due_date=l),type:"date",class:"input"},null,512),[[d,o(a).full_payment_due_date]])])]),e("div",E,[n(e("input",{"onUpdate:modelValue":t[14]||(t[14]=l=>o(a).advance_expected=l),type:"checkbox",class:"checkbox"},null,512),[[_,o(a).advance_expected]]),t[35]||(t[35]=e("span",{class:"text-gray-300 text-sm"},"Â¿Se espera anticipo?",-1))])]),e("div",null,[t[37]||(t[37]=e("label",{class:"text-gray-300 text-sm"},"Lista de artistas",-1)),n(e("select",{"onUpdate:modelValue":t[15]||(t[15]=l=>o(a).artist_ids=l),multiple:"",class:"input"},[(u(!0),r(g,null,f(m.artists,l=>(u(),r("option",{key:l.id,value:l.id},p(l.name),9,z))),128))],512),[[v,o(a).artist_ids]]),t[38]||(t[38]=e("p",{class:"text-gray-500 text-xs mt-1"}," Puedes seleccionar varios artistas (Ctrl/Cmd + click) ",-1))]),e("div",null,[t[39]||(t[39]=e("label",{class:"text-gray-300 text-sm"},"Road managers asignados",-1)),n(e("select",{"onUpdate:modelValue":t[16]||(t[16]=l=>o(a).road_manager_ids=l),multiple:"",class:"input"},[(u(!0),r(g,null,f(m.roadManagers,l=>(u(),r("option",{key:l.id,value:l.id},p(l.name)+" ("+p(l.email)+") ",9,j))),128))],512),[[v,o(a).road_manager_ids]]),t[40]||(t[40]=e("p",{class:"text-gray-500 text-xs mt-1"}," Selecciona los road managers que podran ver y reportar finanzas de este evento. ",-1))]),e("div",null,[t[42]||(t[42]=e("label",{class:"text-gray-300 text-sm"},"Artista principal",-1)),n(e("select",{"onUpdate:modelValue":t[17]||(t[17]=l=>o(a).main_artist_id=l),class:"input"},[t[41]||(t[41]=e("option",{value:"",disabled:""},"Seleccione el artista principal",-1)),(u(!0),r(g,null,f(m.artists.filter(l=>o(a).artist_ids.includes(l.id)),l=>(u(),r("option",{key:l.id,value:l.id},p(l.name),9,N))),128))],512),[[v,o(a).main_artist_id]]),t[43]||(t[43]=e("p",{class:"text-gray-500 text-xs mt-1"}," selecciona el artista principal de la lista de invitados ",-1))]),e("div",q,[e("button",B,p(s.mode==="edit"?"Actualizar evento":"Guardar evento"),1)])],32))}},R=C(T,[["__scopeId","data-v-4ffbb336"]]);export{R as default};
